<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Functions | Notes for SCMA450: Data Modeling and Computing</title>
  <meta name="description" content="Notes for SCMA450@University of Nebraska - Lincoln" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Functions | Notes for SCMA450: Data Modeling and Computing" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Notes for SCMA450@University of Nebraska - Lincoln" />
  <meta name="github-repo" content="xuliang-leon/scma450" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Functions | Notes for SCMA450: Data Modeling and Computing" />
  
  <meta name="twitter:description" content="Notes for SCMA450@University of Nebraska - Lincoln" />
  

<meta name="author" content="Dr. Liang (Leon) Xu" />


<meta name="date" content="2021-08-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-frame.html"/>
<link rel="next" href="flow-control.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview of Business Analytics and R Programming</a></li>
<li class="chapter" data-level="2" data-path="chapter01.html"><a href="chapter01.html"><i class="fa fa-check"></i><b>2</b> Define Variables</a><ul>
<li class="chapter" data-level="2.1" data-path="chapter01.html"><a href="chapter01.html#use-r-as-a-calculator"><i class="fa fa-check"></i><b>2.1</b> Use R as a Calculator</a></li>
<li class="chapter" data-level="2.2" data-path="chapter01.html"><a href="chapter01.html#define-variables"><i class="fa fa-check"></i><b>2.2</b> Define variables</a></li>
<li class="chapter" data-level="2.3" data-path="chapter01.html"><a href="chapter01.html#basic-variable-modes-integer-numeric-character-logical-factor."><i class="fa fa-check"></i><b>2.3</b> Basic Variable Modes: integer, numeric, character, logical, factor.</a><ul>
<li class="chapter" data-level="2.3.1" data-path="chapter01.html"><a href="chapter01.html#integer-and-numeric"><i class="fa fa-check"></i><b>2.3.1</b> Integer and numeric</a></li>
<li class="chapter" data-level="2.3.2" data-path="chapter01.html"><a href="chapter01.html#logical"><i class="fa fa-check"></i><b>2.3.2</b> Logical</a></li>
<li class="chapter" data-level="2.3.3" data-path="chapter01.html"><a href="chapter01.html#character"><i class="fa fa-check"></i><b>2.3.3</b> Character</a></li>
<li class="chapter" data-level="2.3.4" data-path="chapter01.html"><a href="chapter01.html#type-coercion"><i class="fa fa-check"></i><b>2.3.4</b> Type coercion</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="chapter01.html"><a href="chapter01.html#exercise-1-greeting-from-r"><i class="fa fa-check"></i><b>2.4</b> Exercise 1: Greeting from R</a></li>
<li class="chapter" data-level="2.5" data-path="chapter01.html"><a href="chapter01.html#exercise-2-mortgage-calculation"><i class="fa fa-check"></i><b>2.5</b> Exercise 2: Mortgage Calculation</a></li>
<li class="chapter" data-level="2.6" data-path="chapter01.html"><a href="chapter01.html#summary"><i class="fa fa-check"></i><b>2.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html"><i class="fa fa-check"></i><b>3</b> Data Structure: Vector, Matrix, List and Factor</a><ul>
<li class="chapter" data-level="3.1" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#vector"><i class="fa fa-check"></i><b>3.1</b> Vector</a><ul>
<li class="chapter" data-level="3.1.1" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#subsetting-vectors"><i class="fa fa-check"></i><b>3.1.1</b> Subsetting vectors</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#vector-calculus"><i class="fa fa-check"></i><b>3.1.2</b> Vector calculus</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#matrices"><i class="fa fa-check"></i><b>3.2</b> Matrices</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#subsetting-matrix"><i class="fa fa-check"></i><b>3.2.1</b> subsetting matrix</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#matrix-calculus"><i class="fa fa-check"></i><b>3.2.2</b> matrix calculus</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#factors"><i class="fa fa-check"></i><b>3.3</b> Factors</a></li>
<li class="chapter" data-level="3.4" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#list"><i class="fa fa-check"></i><b>3.4</b> List</a></li>
<li class="chapter" data-level="3.5" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#summary-1"><i class="fa fa-check"></i><b>3.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-frame.html"><a href="data-frame.html"><i class="fa fa-check"></i><b>4</b> Data Frame</a><ul>
<li class="chapter" data-level="4.1" data-path="data-frame.html"><a href="data-frame.html#define-a-data.frame-manually"><i class="fa fa-check"></i><b>4.1</b> Define a data.frame manually</a></li>
<li class="chapter" data-level="4.2" data-path="data-frame.html"><a href="data-frame.html#subsetting-data.frame"><i class="fa fa-check"></i><b>4.2</b> Subsetting data.frame</a></li>
<li class="chapter" data-level="4.3" data-path="data-frame.html"><a href="data-frame.html#import-csv-data-as-data.frame."><i class="fa fa-check"></i><b>4.3</b> Import csv data as data.frame.</a></li>
<li class="chapter" data-level="4.4" data-path="data-frame.html"><a href="data-frame.html#subsetting-data-frame"><i class="fa fa-check"></i><b>4.4</b> Subsetting data frame</a></li>
<li class="chapter" data-level="4.5" data-path="data-frame.html"><a href="data-frame.html#write-a-data-frame-to-your-computer"><i class="fa fa-check"></i><b>4.5</b> Write a data frame to your computer</a></li>
<li class="chapter" data-level="4.6" data-path="data-frame.html"><a href="data-frame.html#summary-2"><i class="fa fa-check"></i><b>4.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>5</b> Functions</a><ul>
<li class="chapter" data-level="5.1" data-path="functions.html"><a href="functions.html#get-the-help-document-of-a-function"><i class="fa fa-check"></i><b>5.1</b> Get the Help Document of A Function</a></li>
<li class="chapter" data-level="5.2" data-path="functions.html"><a href="functions.html#call-build-in-functions-in-r"><i class="fa fa-check"></i><b>5.2</b> Call build-in functions in R</a></li>
<li class="chapter" data-level="5.3" data-path="functions.html"><a href="functions.html#write-your-own-functions"><i class="fa fa-check"></i><b>5.3</b> Write Your Own Functions</a></li>
<li class="chapter" data-level="5.4" data-path="functions.html"><a href="functions.html#flexible-function"><i class="fa fa-check"></i><b>5.4</b> Flexible Function</a></li>
<li class="chapter" data-level="5.5" data-path="functions.html"><a href="functions.html#excercise-1"><i class="fa fa-check"></i><b>5.5</b> Excercise 1</a></li>
<li class="chapter" data-level="5.6" data-path="functions.html"><a href="functions.html#the-apply-function-family"><i class="fa fa-check"></i><b>5.6</b> The apply() function family</a></li>
<li class="chapter" data-level="5.7" data-path="functions.html"><a href="functions.html#scoping-rule-in-r"><i class="fa fa-check"></i><b>5.7</b> Scoping Rule in R</a></li>
<li class="chapter" data-level="5.8" data-path="functions.html"><a href="functions.html#excercise"><i class="fa fa-check"></i><b>5.8</b> Excercise</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="flow-control.html"><a href="flow-control.html"><i class="fa fa-check"></i><b>6</b> Flow Control</a><ul>
<li class="chapter" data-level="6.1" data-path="flow-control.html"><a href="flow-control.html#ifelse-statement"><i class="fa fa-check"></i><b>6.1</b> if…else Statement</a></li>
<li class="chapter" data-level="6.2" data-path="flow-control.html"><a href="flow-control.html#ifelse-ifelse-statement"><i class="fa fa-check"></i><b>6.2</b> if…else if…else Statement</a></li>
<li class="chapter" data-level="6.3" data-path="flow-control.html"><a href="flow-control.html#exercise"><i class="fa fa-check"></i><b>6.3</b> Exercise</a></li>
<li class="chapter" data-level="6.4" data-path="flow-control.html"><a href="flow-control.html#for-loop"><i class="fa fa-check"></i><b>6.4</b> for loop</a></li>
<li class="chapter" data-level="6.5" data-path="flow-control.html"><a href="flow-control.html#break-your-loops-with-break"><i class="fa fa-check"></i><b>6.5</b> Break Your Loops With break</a></li>
<li class="chapter" data-level="6.6" data-path="flow-control.html"><a href="flow-control.html#jump-to-the-next-cycly-with-next"><i class="fa fa-check"></i><b>6.6</b> Jump to the next cycly with next</a></li>
<li class="chapter" data-level="6.7" data-path="flow-control.html"><a href="flow-control.html#exercise-1"><i class="fa fa-check"></i><b>6.7</b> Exercise</a></li>
<li class="chapter" data-level="6.8" data-path="flow-control.html"><a href="flow-control.html#while-loop"><i class="fa fa-check"></i><b>6.8</b> While Loop</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Notes for SCMA450: Data Modeling and Computing</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="functions" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Functions</h1>
<p>Functions are the building blocks in R. There are two ways to pass arguments to a function: by argument names and by position. You will learn to call function through these two ways. In addition, you also will</p>
<ul>
<li>Learn to examine the help document of each function by using ?function_name.</li>
<li>Understand the default value of arguments.</li>
<li>Open the black box of functions by learning to write your own functions.</li>
<li>Understand the scoping rule of R.</li>
</ul>
<div id="get-the-help-document-of-a-function" class="section level2">
<h2><span class="header-section-number">5.1</span> Get the Help Document of A Function</h2>
<p>You cannot memorize all functions and their usage. We rely on the help documents of the function.</p>
<p>Take seq() function as an example. This function can generate a sequence of number. We can type ?seq to get the help document of the function</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="functions.html#cb297-1"></a>?seq</span></code></pre></div>
</div>
<div id="call-build-in-functions-in-r" class="section level2">
<h2><span class="header-section-number">5.2</span> Call build-in functions in R</h2>
<p>The help document of seq() shows the augments of the function is: seq(from = 1, to = 1, by , length , …)</p>
<p>Here “from”, “to”, “by”, “length” are the argument of the functions. Once we pass value to these arguments, the function will then process these arguments according to its code inside the function.</p>
<p>E.g., we want to generate a sequence of even number from 2 to 12.</p>
<ul>
<li>by argument name.</li>
</ul>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="functions.html#cb298-1"></a><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">2</span>,<span class="dt">to=</span><span class="dv">12</span>, <span class="dt">by=</span><span class="dv">2</span>)  </span></code></pre></div>
<pre><code>## [1]  2  4  6  8 10 12</code></pre>
<ul>
<li>by position</li>
</ul>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="functions.html#cb300-1"></a><span class="kw">seq</span>(<span class="dv">2</span>,<span class="dv">12</span>, <span class="dv">2</span>)  </span></code></pre></div>
<pre><code>## [1]  2  4  6  8 10 12</code></pre>
</div>
<div id="write-your-own-functions" class="section level2">
<h2><span class="header-section-number">5.3</span> Write Your Own Functions</h2>
<p>The general format for defining function is as follow:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="functions.html#cb302-1"></a>function_name=<span class="cf">function</span>(argument1,arugment2, ...){</span>
<span id="cb302-2"><a href="functions.html#cb302-2"></a></span>
<span id="cb302-3"><a href="functions.html#cb302-3"></a> <span class="co"># Code to Process the arguments</span></span>
<span id="cb302-4"><a href="functions.html#cb302-4"></a>  </span>
<span id="cb302-5"><a href="functions.html#cb302-5"></a>  <span class="kw">return</span>(results) </span>
<span id="cb302-6"><a href="functions.html#cb302-6"></a></span>
<span id="cb302-7"><a href="functions.html#cb302-7"></a>}</span></code></pre></div>
<p>E.g., our first task is to write a function to calculate the sum square of two numbers.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="functions.html#cb303-1"></a>myfun1=<span class="cf">function</span>(x1,x2){</span>
<span id="cb303-2"><a href="functions.html#cb303-2"></a>  <span class="kw">return</span>(x1<span class="op">^</span><span class="dv">2</span><span class="op">+</span>x2<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb303-3"><a href="functions.html#cb303-3"></a>}</span></code></pre></div>
<p>By default, the result from the last line of the function will be the returned result. So we can change the last line as: <span class="math inline">\(x_1^2+x_2^2\)</span>.</p>
<p>Once we define the function, it is ready to be used just as other functions built-in R.</p>
<ul>
<li>call function by argument name</li>
</ul>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="functions.html#cb304-1"></a><span class="kw">myfun1</span>(<span class="dt">x2=</span><span class="dv">2</span>,<span class="dt">x1=</span><span class="dv">1</span>) </span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<ul>
<li>call function by position</li>
</ul>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="functions.html#cb306-1"></a><span class="kw">myfun1</span>(<span class="dv">1</span>,<span class="dv">2</span>)  </span></code></pre></div>
<pre><code>## [1] 5</code></pre>
</div>
<div id="flexible-function" class="section level2">
<h2><span class="header-section-number">5.4</span> Flexible Function</h2>
<p>You may notice that some functions have an argument of “…”. This is called flexible function. Let’s take a look at an example:</p>
<p>We will define a plot function to make a scatter plot between two variable, and add a linear fitted linear to the plot.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="functions.html#cb308-1"></a>abplot=<span class="cf">function</span>(x,y,...){</span>
<span id="cb308-2"><a href="functions.html#cb308-2"></a>  <span class="kw">plot</span>(x,y,... )    <span class="co"># create a scatter plot</span></span>
<span id="cb308-3"><a href="functions.html#cb308-3"></a>  <span class="kw">abline</span>(<span class="kw">lm</span>(y<span class="op">~</span>x))   <span class="co"># add a fitted line</span></span>
<span id="cb308-4"><a href="functions.html#cb308-4"></a>}</span></code></pre></div>
<p>Essentially, anything you passed in the position of … will be passed to the plot() function.</p>
<p>We can now call abplot() function with additional arguments as below:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="functions.html#cb309-1"></a>Auto=<span class="kw">read.csv</span>(<span class="st">&quot;data/Auto.csv&quot;</span>)</span>
<span id="cb309-2"><a href="functions.html#cb309-2"></a><span class="kw">abplot</span>(Auto<span class="op">$</span>weight, Auto<span class="op">$</span>mpg, <span class="dt">type=</span><span class="st">&quot;p&quot;</span>, <span class="dt">xlab=</span><span class="st">&quot;weight&quot;</span>, </span>
<span id="cb309-3"><a href="functions.html#cb309-3"></a>       <span class="dt">ylab=</span><span class="st">&quot;mpg&quot;</span>,<span class="dt">col=</span><span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-110-1.png" width="672" /></p>
</div>
<div id="excercise-1" class="section level2">
<h2><span class="header-section-number">5.5</span> Excercise 1</h2>
<p>Write a function to calculate the descriptive statistics of an array of numbers (i.e., mean, standard deviation
and skewness). Skewness is a measure of symmetry, or more precisely, the lack of symmetry.
Below is the formula for computing skewness of a variable.</p>
<p><span class="math display">\[skewness =\frac{\sum_{i=1}^n(x_i − \bar x)^3}{n*\sigma^3}\]</span></p>
<p>A variable with skewness close to 0 tend to be symmetry; A variable with negative skewness tend to left
skewed; A variable with positive skewness tend to right.</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="functions.html#cb310-1"></a>mystat=<span class="cf">function</span>(x){</span>
<span id="cb310-2"><a href="functions.html#cb310-2"></a>  avg=<span class="kw">mean</span>(x)</span>
<span id="cb310-3"><a href="functions.html#cb310-3"></a>  sd=<span class="kw">sd</span>(x)</span>
<span id="cb310-4"><a href="functions.html#cb310-4"></a>  skewness=<span class="kw">mean</span>((x<span class="op">-</span>avg)<span class="op">^</span><span class="dv">3</span>)<span class="op">/</span>sd<span class="op">^</span><span class="dv">3</span></span>
<span id="cb310-5"><a href="functions.html#cb310-5"></a>  <span class="kw">return</span>(<span class="kw">c</span>(avg, sd, skewness)) <span class="co"># return mean and std dev as a vector</span></span>
<span id="cb310-6"><a href="functions.html#cb310-6"></a>}</span>
<span id="cb310-7"><a href="functions.html#cb310-7"></a></span>
<span id="cb310-8"><a href="functions.html#cb310-8"></a><span class="co"># acceleration is not as skewed</span></span>
<span id="cb310-9"><a href="functions.html#cb310-9"></a><span class="kw">mystat</span>(Auto<span class="op">$</span>acceleration)</span></code></pre></div>
<pre><code>## [1] 15.5413265  2.7588641  0.2893592</code></pre>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="functions.html#cb312-1"></a><span class="co"># horsepower is right skewed</span></span>
<span id="cb312-2"><a href="functions.html#cb312-2"></a><span class="kw">mystat</span>(Auto<span class="op">$</span>horsepower)</span></code></pre></div>
<pre><code>## [1] 104.469388  38.491160   1.079019</code></pre>
</div>
<div id="the-apply-function-family" class="section level2">
<h2><span class="header-section-number">5.6</span> The apply() function family</h2>
<p>The apply() function family is very useful for data analysis. The function looks like below:</p>
<p>apply(X, MARGIN, FUN, …), where X is 2-dimensional data array, e.g., matrix or a data.frame; MARGIN is a variable defining how the function is applied:</p>
<ul>
<li>when MARGIN=1, it applies over rows,</li>
<li>whereas with MARGIN=2, it works over columns</li>
</ul>
<p>FUN, which is the function that you want to apply to the data.</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="functions.html#cb314-1"></a><span class="kw">apply</span>(Auto[<span class="kw">c</span>(<span class="st">&quot;mpg&quot;</span>,<span class="st">&quot;weight&quot;</span>,<span class="st">&quot;horsepower&quot;</span>)], <span class="dv">2</span>, mystat)</span></code></pre></div>
<p>In addition, lapply() and sapply() are the two variants of apply(). lapply() and sapply() both work over column and return results in different format.</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="functions.html#cb315-1"></a><span class="co"># apply function on the column and return results as list</span></span>
<span id="cb315-2"><a href="functions.html#cb315-2"></a><span class="kw">lapply</span>(Auto[<span class="kw">c</span>(<span class="st">&quot;mpg&quot;</span>,<span class="st">&quot;weight&quot;</span>,<span class="st">&quot;horsepower&quot;</span>)], mystat)</span></code></pre></div>
<pre><code>## $mpg
## [1] 23.4459184  7.8050075  0.4536001
## 
## $weight
## [1] 2977.584184  849.402560    0.515616
## 
## $horsepower
## [1] 104.469388  38.491160   1.079019</code></pre>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="functions.html#cb317-1"></a><span class="co"># apply function on column and return a simplified results</span></span>
<span id="cb317-2"><a href="functions.html#cb317-2"></a><span class="kw">sapply</span>(Auto[<span class="kw">c</span>(<span class="st">&quot;mpg&quot;</span>,<span class="st">&quot;weight&quot;</span>,<span class="st">&quot;horsepower&quot;</span>)], mystat)</span></code></pre></div>
<pre><code>##             mpg      weight horsepower
## [1,] 23.4459184 2977.584184 104.469388
## [2,]  7.8050075  849.402560  38.491160
## [3,]  0.4536001    0.515616   1.079019</code></pre>
</div>
<div id="scoping-rule-in-r" class="section level2">
<h2><span class="header-section-number">5.7</span> Scoping Rule in R</h2>
<p>Scoping Rule determines where R should search the value of free variable inside a function. Free variables inside a function is the variables that is neither defined in a function nor the functions’ argument.</p>
<p>Let’s look at an example.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="functions.html#cb319-1"></a>power=<span class="dv">2</span></span>
<span id="cb319-2"><a href="functions.html#cb319-2"></a></span>
<span id="cb319-3"><a href="functions.html#cb319-3"></a>myfun2=<span class="cf">function</span>(x){    </span>
<span id="cb319-4"><a href="functions.html#cb319-4"></a>  x<span class="op">^</span>power </span>
<span id="cb319-5"><a href="functions.html#cb319-5"></a>}</span>
<span id="cb319-6"><a href="functions.html#cb319-6"></a></span>
<span id="cb319-7"><a href="functions.html#cb319-7"></a><span class="kw">myfun2</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 25</code></pre>
<p>In the above code, “power” is a free variable. A good practice is to avoid free variables. In other word, we should define variables needed by a function either through arguments or define locally within the function. For example, we can revise the above function as below:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="functions.html#cb321-1"></a>power=<span class="dv">2</span></span>
<span id="cb321-2"><a href="functions.html#cb321-2"></a>myfun2=<span class="cf">function</span>(x){    </span>
<span id="cb321-3"><a href="functions.html#cb321-3"></a>  power=<span class="dv">3</span>        <span class="co"># define power inside the function</span></span>
<span id="cb321-4"><a href="functions.html#cb321-4"></a>  x<span class="op">^</span>power            </span>
<span id="cb321-5"><a href="functions.html#cb321-5"></a>}</span>
<span id="cb321-6"><a href="functions.html#cb321-6"></a></span>
<span id="cb321-7"><a href="functions.html#cb321-7"></a><span class="co"># guess, what is the value of myfun2(2) </span></span>
<span id="cb321-8"><a href="functions.html#cb321-8"></a><span class="kw">myfun2</span>(<span class="dv">2</span>) </span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="functions.html#cb323-1"></a><span class="co"># guess, what is the value of power</span></span>
<span id="cb323-2"><a href="functions.html#cb323-2"></a>power</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>The scoping rule in R determines that what is the value of “power” when we call myfun2(2). In R, the program will first search inside the function whether “power” is defined. If yes, then use the value defined inside the function. Otherwise, the program examine whether “power” is defined outside the function. Changing the value inside the function will not change the variable outside the function.</p>
</div>
<div id="excercise" class="section level2">
<h2><span class="header-section-number">5.8</span> Excercise</h2>
<p>Support you are working at a bank provides mortgage loan. One important task is to calculate the monthly mortgage payment for any given loan. You can use the following equation to calculate the monthly mortgage payment:
<span class="math display">\[M = P ( i(1 + i)^n ) / ( (1 + i)^n - 1)\]</span>
where</p>
<ul>
<li>P = principal loan amount</li>
<li>i = annual_interest_rate/12, i.e., i is the monthly interest rate, which is the annual interest rate divided by 12</li>
<li>n = number of months required to repay the loan</li>
</ul>
<p>In this exercise, your goal is define a function for calculating monthly mortgage payment. The function takes three arguments: P(principal), annual_rate, year_repay. The default year_repay is 30, which is the most common mortgage term.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-frame.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="flow-control.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/04-function.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
