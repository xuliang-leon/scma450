<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 24 Decision Tree | Notes for SCMA450: Data Modeling and Computing</title>
  <meta name="description" content="Notes for SCMA450@University of Nebraska - Lincoln" />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 24 Decision Tree | Notes for SCMA450: Data Modeling and Computing" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Notes for SCMA450@University of Nebraska - Lincoln" />
  <meta name="github-repo" content="xuliang-leon/scma450" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 24 Decision Tree | Notes for SCMA450: Data Modeling and Computing" />
  
  <meta name="twitter:description" content="Notes for SCMA450@University of Nebraska - Lincoln" />
  

<meta name="author" content="Dr. Liang (Leon) Xu" />


<meta name="date" content="2021-09-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="best-subset-model-selection-with-trainingtest-set.html"/>
<link rel="next" href="maching-learning-with-caret.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">SCMA450 Notes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview of Business Analytics and R Programming</a></li>
<li class="chapter" data-level="2" data-path="chapter01.html"><a href="chapter01.html"><i class="fa fa-check"></i><b>2</b> Define Variables</a><ul>
<li class="chapter" data-level="2.1" data-path="chapter01.html"><a href="chapter01.html#use-r-as-a-calculator"><i class="fa fa-check"></i><b>2.1</b> Use R as a Calculator</a></li>
<li class="chapter" data-level="2.2" data-path="chapter01.html"><a href="chapter01.html#define-variables"><i class="fa fa-check"></i><b>2.2</b> Define variables</a></li>
<li class="chapter" data-level="2.3" data-path="chapter01.html"><a href="chapter01.html#basic-variable-modes-integer-numeric-character-logical-factor."><i class="fa fa-check"></i><b>2.3</b> Basic Variable Modes: integer, numeric, character, logical, factor.</a><ul>
<li class="chapter" data-level="2.3.1" data-path="chapter01.html"><a href="chapter01.html#integer-and-numeric"><i class="fa fa-check"></i><b>2.3.1</b> Integer and numeric</a></li>
<li class="chapter" data-level="2.3.2" data-path="chapter01.html"><a href="chapter01.html#logical"><i class="fa fa-check"></i><b>2.3.2</b> Logical</a></li>
<li class="chapter" data-level="2.3.3" data-path="chapter01.html"><a href="chapter01.html#character"><i class="fa fa-check"></i><b>2.3.3</b> Character</a></li>
<li class="chapter" data-level="2.3.4" data-path="chapter01.html"><a href="chapter01.html#type-coercion"><i class="fa fa-check"></i><b>2.3.4</b> Type coercion</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="chapter01.html"><a href="chapter01.html#exercise-1-greeting-from-r"><i class="fa fa-check"></i><b>2.4</b> Exercise 1: Greeting from R</a></li>
<li class="chapter" data-level="2.5" data-path="chapter01.html"><a href="chapter01.html#exercise-2-mortgage-calculation"><i class="fa fa-check"></i><b>2.5</b> Exercise 2: Mortgage Calculation</a></li>
<li class="chapter" data-level="2.6" data-path="chapter01.html"><a href="chapter01.html#summary"><i class="fa fa-check"></i><b>2.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html"><i class="fa fa-check"></i><b>3</b> Data Structure: Vector, Matrix, List and Factor</a><ul>
<li class="chapter" data-level="3.1" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#vector"><i class="fa fa-check"></i><b>3.1</b> Vector</a><ul>
<li class="chapter" data-level="3.1.1" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#subsetting-vectors"><i class="fa fa-check"></i><b>3.1.1</b> Subsetting vectors</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#vector-calculus"><i class="fa fa-check"></i><b>3.1.2</b> Vector calculus</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#matrices"><i class="fa fa-check"></i><b>3.2</b> Matrices</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#subsetting-matrix"><i class="fa fa-check"></i><b>3.2.1</b> subsetting matrix</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#matrix-calculus"><i class="fa fa-check"></i><b>3.2.2</b> matrix calculus</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#factors"><i class="fa fa-check"></i><b>3.3</b> Factors</a></li>
<li class="chapter" data-level="3.4" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#list"><i class="fa fa-check"></i><b>3.4</b> List</a></li>
<li class="chapter" data-level="3.5" data-path="data-structure-vector-matrix-list-and-factor.html"><a href="data-structure-vector-matrix-list-and-factor.html#summary-1"><i class="fa fa-check"></i><b>3.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-frame.html"><a href="data-frame.html"><i class="fa fa-check"></i><b>4</b> Data Frame</a><ul>
<li class="chapter" data-level="4.1" data-path="data-frame.html"><a href="data-frame.html#define-a-data.frame-manually"><i class="fa fa-check"></i><b>4.1</b> Define a data.frame manually</a></li>
<li class="chapter" data-level="4.2" data-path="data-frame.html"><a href="data-frame.html#subsetting-data.frame"><i class="fa fa-check"></i><b>4.2</b> Subsetting data.frame</a></li>
<li class="chapter" data-level="4.3" data-path="data-frame.html"><a href="data-frame.html#import-csv-data-as-data.frame."><i class="fa fa-check"></i><b>4.3</b> Import csv data as data.frame.</a></li>
<li class="chapter" data-level="4.4" data-path="data-frame.html"><a href="data-frame.html#subsetting-data-frame"><i class="fa fa-check"></i><b>4.4</b> Subsetting data frame</a></li>
<li class="chapter" data-level="4.5" data-path="data-frame.html"><a href="data-frame.html#write-a-data-frame-to-your-computer"><i class="fa fa-check"></i><b>4.5</b> Write a data frame to your computer</a></li>
<li class="chapter" data-level="4.6" data-path="data-frame.html"><a href="data-frame.html#summary-2"><i class="fa fa-check"></i><b>4.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>5</b> Functions</a><ul>
<li class="chapter" data-level="5.1" data-path="functions.html"><a href="functions.html#get-the-help-document-of-a-function"><i class="fa fa-check"></i><b>5.1</b> Get the Help Document of A Function</a></li>
<li class="chapter" data-level="5.2" data-path="functions.html"><a href="functions.html#call-build-in-functions-in-r"><i class="fa fa-check"></i><b>5.2</b> Call build-in functions in R</a></li>
<li class="chapter" data-level="5.3" data-path="functions.html"><a href="functions.html#write-your-own-functions"><i class="fa fa-check"></i><b>5.3</b> Write Your Own Functions</a></li>
<li class="chapter" data-level="5.4" data-path="functions.html"><a href="functions.html#flexible-function"><i class="fa fa-check"></i><b>5.4</b> Flexible Function</a></li>
<li class="chapter" data-level="5.5" data-path="functions.html"><a href="functions.html#excercise-1"><i class="fa fa-check"></i><b>5.5</b> Excercise 1</a></li>
<li class="chapter" data-level="5.6" data-path="functions.html"><a href="functions.html#the-apply-function-family"><i class="fa fa-check"></i><b>5.6</b> The apply() function family</a></li>
<li class="chapter" data-level="5.7" data-path="functions.html"><a href="functions.html#scoping-rule-in-r"><i class="fa fa-check"></i><b>5.7</b> Scoping Rule in R</a></li>
<li class="chapter" data-level="5.8" data-path="functions.html"><a href="functions.html#excercise"><i class="fa fa-check"></i><b>5.8</b> Excercise</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="flow-control.html"><a href="flow-control.html"><i class="fa fa-check"></i><b>6</b> Flow Control</a><ul>
<li class="chapter" data-level="6.1" data-path="flow-control.html"><a href="flow-control.html#ifelse-statement"><i class="fa fa-check"></i><b>6.1</b> if…else Statement</a></li>
<li class="chapter" data-level="6.2" data-path="flow-control.html"><a href="flow-control.html#ifelse-ifelse-statement"><i class="fa fa-check"></i><b>6.2</b> if…else if…else Statement</a></li>
<li class="chapter" data-level="6.3" data-path="flow-control.html"><a href="flow-control.html#exercise"><i class="fa fa-check"></i><b>6.3</b> Exercise</a></li>
<li class="chapter" data-level="6.4" data-path="flow-control.html"><a href="flow-control.html#for-loop"><i class="fa fa-check"></i><b>6.4</b> for loop</a></li>
<li class="chapter" data-level="6.5" data-path="flow-control.html"><a href="flow-control.html#break-your-loops-with-break"><i class="fa fa-check"></i><b>6.5</b> Break Your Loops With break</a></li>
<li class="chapter" data-level="6.6" data-path="flow-control.html"><a href="flow-control.html#jump-to-the-next-cycly-with-next"><i class="fa fa-check"></i><b>6.6</b> Jump to the next cycly with next</a></li>
<li class="chapter" data-level="6.7" data-path="flow-control.html"><a href="flow-control.html#exercise-1"><i class="fa fa-check"></i><b>6.7</b> Exercise</a></li>
<li class="chapter" data-level="6.8" data-path="flow-control.html"><a href="flow-control.html#while-loop"><i class="fa fa-check"></i><b>6.8</b> While Loop</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-markdown-for-documentation.html"><a href="r-markdown-for-documentation.html"><i class="fa fa-check"></i><b>7</b> R markdown for documentation</a><ul>
<li class="chapter" data-level="7.1" data-path="r-markdown-for-documentation.html"><a href="r-markdown-for-documentation.html#rock-paper-scissors"><i class="fa fa-check"></i><b>7.1</b> rock, paper, scissors</a></li>
<li class="chapter" data-level="7.2" data-path="r-markdown-for-documentation.html"><a href="r-markdown-for-documentation.html#verison-1"><i class="fa fa-check"></i><b>7.2</b> verison 1:</a></li>
<li class="chapter" data-level="7.3" data-path="r-markdown-for-documentation.html"><a href="r-markdown-for-documentation.html#verison-2"><i class="fa fa-check"></i><b>7.3</b> verison 2</a></li>
<li class="chapter" data-level="7.4" data-path="r-markdown-for-documentation.html"><a href="r-markdown-for-documentation.html#version-3"><i class="fa fa-check"></i><b>7.4</b> Version 3</a></li>
<li class="chapter" data-level="7.5" data-path="r-markdown-for-documentation.html"><a href="r-markdown-for-documentation.html#verision-4"><i class="fa fa-check"></i><b>7.5</b> verision 4</a></li>
<li class="chapter" data-level="7.6" data-path="r-markdown-for-documentation.html"><a href="r-markdown-for-documentation.html#version-5"><i class="fa fa-check"></i><b>7.6</b> version 5</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html"><i class="fa fa-check"></i><b>8</b> Use data.table Package for Big Data I</a><ul>
<li class="chapter" data-level="8.1" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#install-r-packages"><i class="fa fa-check"></i><b>8.1</b> Install R Packages</a></li>
<li class="chapter" data-level="8.2" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#fread-read-csv-file-into-r-as-data.table"><i class="fa fa-check"></i><b>8.2</b> fread(): Read csv file into R as data.table</a><ul>
<li class="chapter" data-level="8.2.1" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#convert-data.frame-into-data.table"><i class="fa fa-check"></i><b>8.2.1</b> Convert data.frame into data.table</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#quick-summary-of-the-data"><i class="fa fa-check"></i><b>8.3</b> Quick summary of the data</a></li>
<li class="chapter" data-level="8.4" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#data-manipulation-with-data.table"><i class="fa fa-check"></i><b>8.4</b> Data Manipulation with data.table</a><ul>
<li class="chapter" data-level="8.4.1" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#filtering-rows-through-logical-expression"><i class="fa fa-check"></i><b>8.4.1</b> Filtering rows through logical expression</a></li>
<li class="chapter" data-level="8.4.2" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#filtering-rows-by-row-index"><i class="fa fa-check"></i><b>8.4.2</b> Filtering rows by row index</a></li>
<li class="chapter" data-level="8.4.3" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#fitering-rows-through-between-chin-like"><i class="fa fa-check"></i><b>8.4.3</b> Fitering rows through %between%, %chin%, %like%</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#select-columns"><i class="fa fa-check"></i><b>8.5</b> Select Columns</a><ul>
<li class="chapter" data-level="8.5.1" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#using-column-names-to-select-columns"><i class="fa fa-check"></i><b>8.5.1</b> Using column names to select columns</a></li>
<li class="chapter" data-level="8.5.2" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#select-columns-as-variables---the-data.table-way"><i class="fa fa-check"></i><b>8.5.2</b> Select columns as variables - the data.table way</a></li>
<li class="chapter" data-level="8.5.3" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#computing-on-columns"><i class="fa fa-check"></i><b>8.5.3</b> Computing on columns</a></li>
<li class="chapter" data-level="8.5.4" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#computing-on-rows-and-columns"><i class="fa fa-check"></i><b>8.5.4</b> Computing on rows and columns</a></li>
<li class="chapter" data-level="8.5.5" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#special-symbol-.n-in-j"><i class="fa fa-check"></i><b>8.5.5</b> Special symbol .N in j</a></li>
<li class="chapter" data-level="8.5.6" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#advanced-computation-on-columns"><i class="fa fa-check"></i><b>8.5.6</b> Advanced Computation on columns</a></li>
<li class="chapter" data-level="8.5.7" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#sort-data-by-onemultiple-columns"><i class="fa fa-check"></i><b>8.5.7</b> Sort Data by One/Multiple Columns</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#calcuation-by-group"><i class="fa fa-check"></i><b>8.6</b> Calcuation by Group</a></li>
<li class="chapter" data-level="8.7" data-path="use-data.table-package-for-big-data-i.html"><a href="use-data.table-package-for-big-data-i.html#summary-3"><i class="fa fa-check"></i><b>8.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="9" data-path="use-data.table-package-for-big-data-ii.html"><a href="use-data.table-package-for-big-data-ii.html"><i class="fa fa-check"></i><b>9</b> Use data.table Package for Big Data II</a><ul>
<li class="chapter" data-level="9.1" data-path="use-data.table-package-for-big-data-ii.html"><a href="use-data.table-package-for-big-data-ii.html#use-chaining-to-avoid-intermediate-result"><i class="fa fa-check"></i><b>9.1</b> Use Chaining to Avoid Intermediate Result</a></li>
<li class="chapter" data-level="9.2" data-path="use-data.table-package-for-big-data-ii.html"><a href="use-data.table-package-for-big-data-ii.html#uniquen"><i class="fa fa-check"></i><b>9.2</b> uniqueN()</a></li>
<li class="chapter" data-level="9.3" data-path="use-data.table-package-for-big-data-ii.html"><a href="use-data.table-package-for-big-data-ii.html#subset-of-data-.sd"><i class="fa fa-check"></i><b>9.3</b> Subset of Data: .SD[]</a></li>
<li class="chapter" data-level="9.4" data-path="use-data.table-package-for-big-data-ii.html"><a href="use-data.table-package-for-big-data-ii.html#use-to-addupdate-columns-by-reference"><i class="fa fa-check"></i><b>9.4</b> Use := to Add/Update Columns By Reference</a></li>
<li class="chapter" data-level="9.5" data-path="use-data.table-package-for-big-data-ii.html"><a href="use-data.table-package-for-big-data-ii.html#binning-a-continuous-value-into-category"><i class="fa fa-check"></i><b>9.5</b> Binning a continuous value into category</a></li>
<li class="chapter" data-level="9.6" data-path="use-data.table-package-for-big-data-ii.html"><a href="use-data.table-package-for-big-data-ii.html#expressions-in-by"><i class="fa fa-check"></i><b>9.6</b> Expressions in by</a></li>
<li class="chapter" data-level="9.7" data-path="use-data.table-package-for-big-data-ii.html"><a href="use-data.table-package-for-big-data-ii.html#summary-4"><i class="fa fa-check"></i><b>9.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="join-mutliple-datasets.html"><a href="join-mutliple-datasets.html"><i class="fa fa-check"></i><b>10</b> Join Mutliple Datasets</a><ul>
<li class="chapter" data-level="10.0.1" data-path="join-mutliple-datasets.html"><a href="join-mutliple-datasets.html#join-files-using-merge"><i class="fa fa-check"></i><b>10.0.1</b> Join files using merge()</a></li>
<li class="chapter" data-level="10.0.2" data-path="join-mutliple-datasets.html"><a href="join-mutliple-datasets.html#inner-join"><i class="fa fa-check"></i><b>10.0.2</b> inner join</a></li>
<li class="chapter" data-level="10.0.3" data-path="join-mutliple-datasets.html"><a href="join-mutliple-datasets.html#full-join"><i class="fa fa-check"></i><b>10.0.3</b> full join</a></li>
<li class="chapter" data-level="10.0.4" data-path="join-mutliple-datasets.html"><a href="join-mutliple-datasets.html#left-joinright-join"><i class="fa fa-check"></i><b>10.0.4</b> left join/right join</a></li>
<li class="chapter" data-level="10.1" data-path="join-mutliple-datasets.html"><a href="join-mutliple-datasets.html#merge-dataset-using-data.table-syntax"><i class="fa fa-check"></i><b>10.1</b> Merge dataset using data.table syntax</a></li>
<li class="chapter" data-level="10.2" data-path="join-mutliple-datasets.html"><a href="join-mutliple-datasets.html#chaining-join-and-data-manipulation"><i class="fa fa-check"></i><b>10.2</b> Chaining Join and Data Manipulation</a></li>
<li class="chapter" data-level="10.3" data-path="join-mutliple-datasets.html"><a href="join-mutliple-datasets.html#exercise-2"><i class="fa fa-check"></i><b>10.3</b> Exercise</a></li>
<li class="chapter" data-level="10.4" data-path="join-mutliple-datasets.html"><a href="join-mutliple-datasets.html#summary-5"><i class="fa fa-check"></i><b>10.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html"><i class="fa fa-check"></i><b>11</b> Put it together: explore big data with data.table</a><ul>
<li class="chapter" data-level="11.1" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#import-the-covid-19-case-data"><i class="fa fa-check"></i><b>11.1</b> Import the COVID-19 case data</a></li>
<li class="chapter" data-level="11.2" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#selecting-rows-and-columns"><i class="fa fa-check"></i><b>11.2</b> Selecting Rows and Columns</a></li>
<li class="chapter" data-level="11.3" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#selecting-rows-and-columns-1"><i class="fa fa-check"></i><b>11.3</b> Selecting Rows and Columns</a></li>
<li class="chapter" data-level="11.4" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#computing-on-j"><i class="fa fa-check"></i><b>11.4</b> Computing on j</a></li>
<li class="chapter" data-level="11.5" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#computing-on-j-1"><i class="fa fa-check"></i><b>11.5</b> Computing on j</a></li>
<li class="chapter" data-level="11.6" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#computing-on-j-2"><i class="fa fa-check"></i><b>11.6</b> Computing on j</a></li>
<li class="chapter" data-level="11.7" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#computing-on-j-3"><i class="fa fa-check"></i><b>11.7</b> Computing on j</a></li>
<li class="chapter" data-level="11.8" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#special-symbol-.n"><i class="fa fa-check"></i><b>11.8</b> Special symbol .N</a></li>
<li class="chapter" data-level="11.9" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#fitering-rows-through-between"><i class="fa fa-check"></i><b>11.9</b> Fitering rows through %between%</a></li>
<li class="chapter" data-level="11.10" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#fitering-rows-through-chin"><i class="fa fa-check"></i><b>11.10</b> Fitering rows through %chin%</a></li>
<li class="chapter" data-level="11.11" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#uniquen-1"><i class="fa fa-check"></i><b>11.11</b> uniqueN()</a></li>
<li class="chapter" data-level="11.12" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#subset-of-data-.sd-1"><i class="fa fa-check"></i><b>11.12</b> Subset of Data: .SD[ ]</a></li>
<li class="chapter" data-level="11.13" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#subset-of-data-.sd-2"><i class="fa fa-check"></i><b>11.13</b> Subset of Data: .SD[ ]</a></li>
<li class="chapter" data-level="11.14" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#use-to-addupdate-columns-by-reference-1"><i class="fa fa-check"></i><b>11.14</b> Use := to Add/Update Columns By Reference</a></li>
<li class="chapter" data-level="11.15" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#join-datasets"><i class="fa fa-check"></i><b>11.15</b> Join datasets</a></li>
<li class="chapter" data-level="11.16" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#additional-exercises"><i class="fa fa-check"></i><b>11.16</b> Additional Exercises:</a></li>
<li class="chapter" data-level="11.17" data-path="put-it-together-explore-big-data-with-data.html"><a href="put-it-together-explore-big-data-with-data.html#summary-6"><i class="fa fa-check"></i><b>11.17</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html"><i class="fa fa-check"></i><b>12</b> Data Cleaning I</a><ul>
<li class="chapter" data-level="12.1" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#exploring-the-raw-data"><i class="fa fa-check"></i><b>12.1</b> Exploring the raw data</a><ul>
<li class="chapter" data-level="12.1.1" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#understand-the-structure-of-the-data"><i class="fa fa-check"></i><b>12.1.1</b> Understand the structure of the data</a></li>
<li class="chapter" data-level="12.1.2" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#visulize-the-data-in-tabular-form"><i class="fa fa-check"></i><b>12.1.2</b> Visulize the data in Tabular form</a></li>
<li class="chapter" data-level="12.1.3" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#visualize-the-raw-data-through-charts"><i class="fa fa-check"></i><b>12.1.3</b> Visualize the raw data through charts</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#tidying-data"><i class="fa fa-check"></i><b>12.2</b> Tidying data</a><ul>
<li class="chapter" data-level="12.2.1" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#melt"><i class="fa fa-check"></i><b>12.2.1</b> melt()</a></li>
<li class="chapter" data-level="12.2.2" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#dcast"><i class="fa fa-check"></i><b>12.2.2</b> dcast()</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#preparing-data-for-analysis"><i class="fa fa-check"></i><b>12.3</b> Preparing data for analysis</a><ul>
<li class="chapter" data-level="12.3.1" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#type-conversions"><i class="fa fa-check"></i><b>12.3.1</b> Type conversions</a></li>
<li class="chapter" data-level="12.3.2" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#working-with-dates"><i class="fa fa-check"></i><b>12.3.2</b> Working with dates</a></li>
<li class="chapter" data-level="12.3.3" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#string-character-manipulation"><i class="fa fa-check"></i><b>12.3.3</b> String (character) manipulation</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#missing-and-special-values-in-r"><i class="fa fa-check"></i><b>12.4</b> Missing and special values in R</a></li>
<li class="chapter" data-level="12.5" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#outliers-obvious-error-and-missing-value"><i class="fa fa-check"></i><b>12.5</b> Outliers, obvious error and missing value</a></li>
<li class="chapter" data-level="12.6" data-path="data-cleaning-i.html"><a href="data-cleaning-i.html#summary-7"><i class="fa fa-check"></i><b>12.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html"><i class="fa fa-check"></i><b>13</b> Data Cleaning II</a><ul>
<li class="chapter" data-level="13.1" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#explore-the-raw-data"><i class="fa fa-check"></i><b>13.1</b> Explore the raw data</a></li>
<li class="chapter" data-level="13.2" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#summarize-the-data"><i class="fa fa-check"></i><b>13.2</b> Summarize the data</a><ul>
<li class="chapter" data-level="13.2.1" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#take-a-closer-look"><i class="fa fa-check"></i><b>13.2.1</b> Take a closer look</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#tidy-the-data"><i class="fa fa-check"></i><b>13.3</b> Tidy the data</a></li>
<li class="chapter" data-level="13.4" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#prepare-for-analysis"><i class="fa fa-check"></i><b>13.4</b> prepare for analysis</a><ul>
<li class="chapter" data-level="13.4.1" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#clean-up-dates"><i class="fa fa-check"></i><b>13.4.1</b> Clean up dates</a></li>
<li class="chapter" data-level="13.4.2" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#a-closer-look-at-column-types"><i class="fa fa-check"></i><b>13.4.2</b> A closer look at column types</a></li>
<li class="chapter" data-level="13.4.3" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#missing-extreme-and-unexpected-values"><i class="fa fa-check"></i><b>13.4.3</b> Missing, extreme and unexpected values</a></li>
<li class="chapter" data-level="13.4.4" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#finishing-touches"><i class="fa fa-check"></i><b>13.4.4</b> Finishing touches</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="data-cleaning-ii.html"><a href="data-cleaning-ii.html#summary-8"><i class="fa fa-check"></i><b>13.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="visualization-with-ggplot2-i.html"><a href="visualization-with-ggplot2-i.html"><i class="fa fa-check"></i><b>14</b> Visualization with ggplot2 I</a><ul>
<li class="chapter" data-level="14.1" data-path="visualization-with-ggplot2-i.html"><a href="visualization-with-ggplot2-i.html#scatter-plot"><i class="fa fa-check"></i><b>14.1</b> Scatter plot</a></li>
<li class="chapter" data-level="14.2" data-path="visualization-with-ggplot2-i.html"><a href="visualization-with-ggplot2-i.html#line-fitting"><i class="fa fa-check"></i><b>14.2</b> line-fitting</a></li>
<li class="chapter" data-level="14.3" data-path="visualization-with-ggplot2-i.html"><a href="visualization-with-ggplot2-i.html#overplotting"><i class="fa fa-check"></i><b>14.3</b> Overplotting</a></li>
<li class="chapter" data-level="14.4" data-path="visualization-with-ggplot2-i.html"><a href="visualization-with-ggplot2-i.html#bar-chart-and-statistical-transformation"><i class="fa fa-check"></i><b>14.4</b> Bar chart and statistical transformation</a></li>
<li class="chapter" data-level="14.5" data-path="visualization-with-ggplot2-i.html"><a href="visualization-with-ggplot2-i.html#stacked-par"><i class="fa fa-check"></i><b>14.5</b> stacked par</a></li>
<li class="chapter" data-level="14.6" data-path="visualization-with-ggplot2-i.html"><a href="visualization-with-ggplot2-i.html#histogram"><i class="fa fa-check"></i><b>14.6</b> Histogram</a></li>
<li class="chapter" data-level="14.7" data-path="visualization-with-ggplot2-i.html"><a href="visualization-with-ggplot2-i.html#boxplot"><i class="fa fa-check"></i><b>14.7</b> boxplot</a></li>
<li class="chapter" data-level="14.8" data-path="visualization-with-ggplot2-i.html"><a href="visualization-with-ggplot2-i.html#line-chart"><i class="fa fa-check"></i><b>14.8</b> line chart</a></li>
<li class="chapter" data-level="14.9" data-path="visualization-with-ggplot2-i.html"><a href="visualization-with-ggplot2-i.html#use-theme-to-customize-the-appearance-of-your-chart."><i class="fa fa-check"></i><b>14.9</b> use theme to customize the appearance of your chart.</a></li>
<li class="chapter" data-level="14.10" data-path="visualization-with-ggplot2-i.html"><a href="visualization-with-ggplot2-i.html#summary-9"><i class="fa fa-check"></i><b>14.10</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="visualization-with-ggplot2-ii.html"><a href="visualization-with-ggplot2-ii.html"><i class="fa fa-check"></i><b>15</b> Visualization with ggplot2 II</a><ul>
<li class="chapter" data-level="15.1" data-path="visualization-with-ggplot2-ii.html"><a href="visualization-with-ggplot2-ii.html#bar-chart-and-statistical-transformation-1"><i class="fa fa-check"></i><b>15.1</b> Bar chart and statistical transformation</a></li>
<li class="chapter" data-level="15.2" data-path="visualization-with-ggplot2-ii.html"><a href="visualization-with-ggplot2-ii.html#stacked-par-1"><i class="fa fa-check"></i><b>15.2</b> stacked par</a></li>
<li class="chapter" data-level="15.3" data-path="visualization-with-ggplot2-ii.html"><a href="visualization-with-ggplot2-ii.html#histogram-1"><i class="fa fa-check"></i><b>15.3</b> Histogram</a></li>
<li class="chapter" data-level="15.4" data-path="visualization-with-ggplot2-ii.html"><a href="visualization-with-ggplot2-ii.html#boxplot-1"><i class="fa fa-check"></i><b>15.4</b> boxplot</a></li>
<li class="chapter" data-level="15.5" data-path="visualization-with-ggplot2-ii.html"><a href="visualization-with-ggplot2-ii.html#line-chart-1"><i class="fa fa-check"></i><b>15.5</b> line chart</a></li>
<li class="chapter" data-level="15.6" data-path="visualization-with-ggplot2-ii.html"><a href="visualization-with-ggplot2-ii.html#use-theme-to-customize-the-appearance-of-your-chart.-1"><i class="fa fa-check"></i><b>15.6</b> use theme to customize the appearance of your chart.</a></li>
<li class="chapter" data-level="15.7" data-path="visualization-with-ggplot2-ii.html"><a href="visualization-with-ggplot2-ii.html#summary-10"><i class="fa fa-check"></i><b>15.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="visualization-with-ggplot2-iii.html"><a href="visualization-with-ggplot2-iii.html"><i class="fa fa-check"></i><b>16</b> Visualization with ggplot2 III</a><ul>
<li class="chapter" data-level="16.1" data-path="visualization-with-ggplot2-iii.html"><a href="visualization-with-ggplot2-iii.html#draw-world-map"><i class="fa fa-check"></i><b>16.1</b> Draw world map</a></li>
<li class="chapter" data-level="16.2" data-path="visualization-with-ggplot2-iii.html"><a href="visualization-with-ggplot2-iii.html#draw-us-map"><i class="fa fa-check"></i><b>16.2</b> Draw US map</a></li>
<li class="chapter" data-level="16.3" data-path="visualization-with-ggplot2-iii.html"><a href="visualization-with-ggplot2-iii.html#draw-us-county-map"><i class="fa fa-check"></i><b>16.3</b> draw US county map</a></li>
<li class="chapter" data-level="16.4" data-path="visualization-with-ggplot2-iii.html"><a href="visualization-with-ggplot2-iii.html#summary-11"><i class="fa fa-check"></i><b>16.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="visualization-with-ggplot2---animation.html"><a href="visualization-with-ggplot2---animation.html"><i class="fa fa-check"></i><b>17</b> Visualization with ggplot2 - Animation</a><ul>
<li class="chapter" data-level="17.1" data-path="visualization-with-ggplot2---animation.html"><a href="visualization-with-ggplot2---animation.html#animation-of-scatter-plot-to-show-how-two-variables-evolve-over-time-simultaneously"><i class="fa fa-check"></i><b>17.1</b> Animation of scatter plot to show how two variables evolve over time simultaneously</a></li>
<li class="chapter" data-level="17.2" data-path="visualization-with-ggplot2---animation.html"><a href="visualization-with-ggplot2---animation.html#use-a-line-chart-to-show-how-gdppercap-evolve-over-time"><i class="fa fa-check"></i><b>17.2</b> Use a line chart to show how gdpPercap evolve over time</a></li>
<li class="chapter" data-level="17.3" data-path="visualization-with-ggplot2---animation.html"><a href="visualization-with-ggplot2---animation.html#animation-with-bar-chart"><i class="fa fa-check"></i><b>17.3</b> Animation with Bar chart</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="simple-linear-regression.html"><a href="simple-linear-regression.html"><i class="fa fa-check"></i><b>18</b> Simple Linear Regression</a><ul>
<li class="chapter" data-level="18.1" data-path="simple-linear-regression.html"><a href="simple-linear-regression.html#examine-and-explore-the-data"><i class="fa fa-check"></i><b>18.1</b> Examine and explore the data</a><ul>
<li class="chapter" data-level="18.1.1" data-path="simple-linear-regression.html"><a href="simple-linear-regression.html#correlation-matrix"><i class="fa fa-check"></i><b>18.1.1</b> Correlation matrix</a></li>
<li class="chapter" data-level="18.1.2" data-path="simple-linear-regression.html"><a href="simple-linear-regression.html#scatter-plot-1"><i class="fa fa-check"></i><b>18.1.2</b> Scatter plot</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="simple-linear-regression.html"><a href="simple-linear-regression.html#develop-simple-linear-regression-model"><i class="fa fa-check"></i><b>18.2</b> Develop simple linear regression model</a><ul>
<li class="chapter" data-level="18.2.1" data-path="simple-linear-regression.html"><a href="simple-linear-regression.html#estimation"><i class="fa fa-check"></i><b>18.2.1</b> Estimation</a></li>
<li class="chapter" data-level="18.2.2" data-path="simple-linear-regression.html"><a href="simple-linear-regression.html#how-to-interpret-the-coefficient-estimates"><i class="fa fa-check"></i><b>18.2.2</b> How to interpret the coefficient estimates?</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="simple-linear-regression.html"><a href="simple-linear-regression.html#overall-model-fittness"><i class="fa fa-check"></i><b>18.3</b> Overall model fittness</a><ul>
<li class="chapter" data-level="18.3.1" data-path="simple-linear-regression.html"><a href="simple-linear-regression.html#regression-diagnoise"><i class="fa fa-check"></i><b>18.3.1</b> Regression Diagnoise</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="simple-linear-regression.html"><a href="simple-linear-regression.html#use-estimated-model-for-prediction"><i class="fa fa-check"></i><b>18.4</b> Use estimated model for prediction</a></li>
<li class="chapter" data-level="18.5" data-path="simple-linear-regression.html"><a href="simple-linear-regression.html#summary-12"><i class="fa fa-check"></i><b>18.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="log-tranformation-and-polynomial-terms.html"><a href="log-tranformation-and-polynomial-terms.html"><i class="fa fa-check"></i><b>19</b> Log Tranformation and Polynomial Terms</a><ul>
<li class="chapter" data-level="19.1" data-path="log-tranformation-and-polynomial-terms.html"><a href="log-tranformation-and-polynomial-terms.html#log-transformation"><i class="fa fa-check"></i><b>19.1</b> Log-transformation</a></li>
<li class="chapter" data-level="19.2" data-path="log-tranformation-and-polynomial-terms.html"><a href="log-tranformation-and-polynomial-terms.html#quadratic-regression"><i class="fa fa-check"></i><b>19.2</b> Quadratic regression</a></li>
<li class="chapter" data-level="19.3" data-path="log-tranformation-and-polynomial-terms.html"><a href="log-tranformation-and-polynomial-terms.html#polynomial-regression"><i class="fa fa-check"></i><b>19.3</b> Polynomial regression</a></li>
<li class="chapter" data-level="19.4" data-path="log-tranformation-and-polynomial-terms.html"><a href="log-tranformation-and-polynomial-terms.html#summary-13"><i class="fa fa-check"></i><b>19.4</b> Summary</a></li>
<li class="chapter" data-level="19.5" data-path="log-tranformation-and-polynomial-terms.html"><a href="log-tranformation-and-polynomial-terms.html#exercise-3"><i class="fa fa-check"></i><b>19.5</b> Exercise</a><ul>
<li class="chapter" data-level="19.5.1" data-path="log-tranformation-and-polynomial-terms.html"><a href="log-tranformation-and-polynomial-terms.html#solution"><i class="fa fa-check"></i><b>19.5.1</b> Solution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="mutiple-linear-regression.html"><a href="mutiple-linear-regression.html"><i class="fa fa-check"></i><b>20</b> Mutiple Linear Regression</a><ul>
<li class="chapter" data-level="20.1" data-path="mutiple-linear-regression.html"><a href="mutiple-linear-regression.html#mutiple-linear-regression-1"><i class="fa fa-check"></i><b>20.1</b> Mutiple linear regression</a></li>
<li class="chapter" data-level="20.2" data-path="mutiple-linear-regression.html"><a href="mutiple-linear-regression.html#categorical-variables"><i class="fa fa-check"></i><b>20.2</b> Categorical variables</a></li>
<li class="chapter" data-level="20.3" data-path="mutiple-linear-regression.html"><a href="mutiple-linear-regression.html#interprate-coefficients---keeping-all-other-variables-the-same"><i class="fa fa-check"></i><b>20.3</b> Interprate coefficients - Keeping all other variables the same</a></li>
<li class="chapter" data-level="20.4" data-path="mutiple-linear-regression.html"><a href="mutiple-linear-regression.html#multicollinearity"><i class="fa fa-check"></i><b>20.4</b> Multicollinearity</a></li>
<li class="chapter" data-level="20.5" data-path="mutiple-linear-regression.html"><a href="mutiple-linear-regression.html#excerise"><i class="fa fa-check"></i><b>20.5</b> Excerise</a><ul>
<li class="chapter" data-level="20.5.1" data-path="mutiple-linear-regression.html"><a href="mutiple-linear-regression.html#examine-the-frequency-of-chas"><i class="fa fa-check"></i><b>20.5.1</b> Examine the frequency of chas</a></li>
<li class="chapter" data-level="20.5.2" data-path="mutiple-linear-regression.html"><a href="mutiple-linear-regression.html#visualize-the-house-price-with-ggplot2"><i class="fa fa-check"></i><b>20.5.2</b> Visualize the house price with ggplot2</a></li>
<li class="chapter" data-level="20.5.3" data-path="mutiple-linear-regression.html"><a href="mutiple-linear-regression.html#estimate-the-linear-regression-model"><i class="fa fa-check"></i><b>20.5.3</b> estimate the linear regression model</a></li>
<li class="chapter" data-level="20.5.4" data-path="mutiple-linear-regression.html"><a href="mutiple-linear-regression.html#plot-the-fitted-line"><i class="fa fa-check"></i><b>20.5.4</b> plot the fitted line</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="best-subset-model-selection.html"><a href="best-subset-model-selection.html"><i class="fa fa-check"></i><b>21</b> Best Subset Model Selection</a><ul>
<li class="chapter" data-level="21.1" data-path="best-subset-model-selection.html"><a href="best-subset-model-selection.html#best-subset-model-selection-1"><i class="fa fa-check"></i><b>21.1</b> Best Subset Model Selection</a></li>
<li class="chapter" data-level="21.2" data-path="best-subset-model-selection.html"><a href="best-subset-model-selection.html#deterimining-the-best-model-with-adj-r2-cp-aic-and-bic"><i class="fa fa-check"></i><b>21.2</b> Deterimining the best model with adj-R2, Cp, AIC, and BIC</a><ul>
<li class="chapter" data-level="21.2.1" data-path="best-subset-model-selection.html"><a href="best-subset-model-selection.html#r-squared-is-not-a-good-criteria-for-model-selection"><i class="fa fa-check"></i><b>21.2.1</b> R-squared is not a good criteria for model selection</a></li>
<li class="chapter" data-level="21.2.2" data-path="best-subset-model-selection.html"><a href="best-subset-model-selection.html#select-the-best-model-using-adjusted-r2"><i class="fa fa-check"></i><b>21.2.2</b> Select the best model using Adjusted R2</a></li>
<li class="chapter" data-level="21.2.3" data-path="best-subset-model-selection.html"><a href="best-subset-model-selection.html#select-the-best-model-using-cp"><i class="fa fa-check"></i><b>21.2.3</b> Select the best model using Cp</a></li>
<li class="chapter" data-level="21.2.4" data-path="best-subset-model-selection.html"><a href="best-subset-model-selection.html#select-the-best-model-using-bic"><i class="fa fa-check"></i><b>21.2.4</b> Select the best model using BIC</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="best-subset-model-selection.html"><a href="best-subset-model-selection.html#forwardbackward-selection"><i class="fa fa-check"></i><b>21.3</b> Forward/Backward selection</a></li>
<li class="chapter" data-level="21.4" data-path="best-subset-model-selection.html"><a href="best-subset-model-selection.html#summary-14"><i class="fa fa-check"></i><b>21.4</b> Summary:</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="model-selection-with-trainingtest-set.html"><a href="model-selection-with-trainingtest-set.html"><i class="fa fa-check"></i><b>22</b> Model Selection with Training/Test Set</a><ul>
<li class="chapter" data-level="22.1" data-path="model-selection-with-trainingtest-set.html"><a href="model-selection-with-trainingtest-set.html#create-trainingtest-set"><i class="fa fa-check"></i><b>22.1</b> Create training/test set</a></li>
<li class="chapter" data-level="22.2" data-path="model-selection-with-trainingtest-set.html"><a href="model-selection-with-trainingtest-set.html#model-selection"><i class="fa fa-check"></i><b>22.2</b> Model selection</a><ul>
<li class="chapter" data-level="22.2.1" data-path="model-selection-with-trainingtest-set.html"><a href="model-selection-with-trainingtest-set.html#estimate-the-model-using-training-set"><i class="fa fa-check"></i><b>22.2.1</b> estimate the model using training set</a></li>
<li class="chapter" data-level="22.2.2" data-path="model-selection-with-trainingtest-set.html"><a href="model-selection-with-trainingtest-set.html#evaluate-the-models-out-of-sample-prediction-using-test-set"><i class="fa fa-check"></i><b>22.2.2</b> evaluate the models’ out-of-sample prediction using test set</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="model-selection-with-trainingtest-set.html"><a href="model-selection-with-trainingtest-set.html#model-4-has-the-problem-of-over-fitting"><i class="fa fa-check"></i><b>22.3</b> Model 4 has the problem of over-fitting</a></li>
<li class="chapter" data-level="22.4" data-path="model-selection-with-trainingtest-set.html"><a href="model-selection-with-trainingtest-set.html#other-commonly-used-metrics-for-prediction-performance"><i class="fa fa-check"></i><b>22.4</b> Other Commonly Used Metrics for Prediction performance</a></li>
<li class="chapter" data-level="22.5" data-path="model-selection-with-trainingtest-set.html"><a href="model-selection-with-trainingtest-set.html#summary-15"><i class="fa fa-check"></i><b>22.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="best-subset-model-selection-with-trainingtest-set.html"><a href="best-subset-model-selection-with-trainingtest-set.html"><i class="fa fa-check"></i><b>23</b> Best Subset Model Selection with Training/Test Set</a><ul>
<li class="chapter" data-level="23.1" data-path="best-subset-model-selection-with-trainingtest-set.html"><a href="best-subset-model-selection-with-trainingtest-set.html#create-trainingtest-set-1"><i class="fa fa-check"></i><b>23.1</b> Create training/test set</a></li>
<li class="chapter" data-level="23.2" data-path="best-subset-model-selection-with-trainingtest-set.html"><a href="best-subset-model-selection-with-trainingtest-set.html#evaluate-the-best-subset-regression-through-trainingtest-set"><i class="fa fa-check"></i><b>23.2</b> Evaluate the Best subset regression through training/test set</a></li>
<li class="chapter" data-level="23.3" data-path="best-subset-model-selection-with-trainingtest-set.html"><a href="best-subset-model-selection-with-trainingtest-set.html#exercise-4"><i class="fa fa-check"></i><b>23.3</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="decision-tree.html"><a href="decision-tree.html"><i class="fa fa-check"></i><b>24</b> Decision Tree</a></li>
<li class="chapter" data-level="25" data-path="maching-learning-with-caret.html"><a href="maching-learning-with-caret.html"><i class="fa fa-check"></i><b>25</b> Maching Learning with Caret</a><ul>
<li class="chapter" data-level="25.1" data-path="maching-learning-with-caret.html"><a href="maching-learning-with-caret.html#random-forest"><i class="fa fa-check"></i><b>25.1</b> Random Forest</a></li>
<li class="chapter" data-level="25.2" data-path="maching-learning-with-caret.html"><a href="maching-learning-with-caret.html#random-forest-1"><i class="fa fa-check"></i><b>25.2</b> Random Forest</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/xuliang-leon/scma450" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Notes for SCMA450: Data Modeling and Computing</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="decision-tree" class="section level1">
<h1><span class="header-section-number">Chapter 24</span> Decision Tree</h1>
<div class="sourceCode" id="cb1083"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1083-1"><a href="decision-tree.html#cb1083-1"></a><span class="kw">library</span>(rpart)</span>
<span id="cb1083-2"><a href="decision-tree.html#cb1083-2"></a><span class="kw">library</span>(rattle)  </span></code></pre></div>
<p>A decision tree is a flowchart-like structure in which each internal node represents a “test” on an attribute (e.g. whether a coin flip comes up heads or tails), each branch represents the outcome of the test, and each leaf node represents a class label (decision taken after computing all attributes). The paths from root to leaf represent classification rules.</p>
<p>Below it is an example of a decision tree for loan application. An applicant is evaluated at each node and branched into different branched based on the given rules. The end-node will then decide whether the application will be approved. For example, the first node (i.e., the first decision criteria) is whether the applicant is aged above or below 40. The applicant will be channeled to different branch based on this criteria.</p>
<div class="figure"><span style="display:block;" id="fig:pressure"></span>
<img src="figure/decisiontree.jpg" alt="Decision tree for loan application" width="80%" />
<p class="caption">
Figure 24.1: Decision tree for loan application
</p>
</div>
<p>In the prediction context, such decision tree can be used to predict, e.g., whether the applicant will default. The decision tree is very simple to understand and easy to interpret. The trees can be also visualized and provide insight on how the prediction model work.</p>
<p>You may be wondering, how can we know what should be right decision rules, i.e., the structure of the decision tree? In fact, the optional decision tree is known to be computational impossible. Consequently, practical decision-tree learning algorithms are based on heuristic algorithms such as the greedy algorithm where locally optimal decisions are made at each node.</p>
<p>When we are predicting a binary outcome, e.g., whether applicant will default, this is called classification problem. The corresponding tree is called decision tree. When we are predicting continous outcome, e.g., house price, that is called regression tree.</p>
<p>In R, we can also construct decision tree using the rpart package.
Let’s first take a look at this famous problem of predicting who will survive from the Titanic. Refer to <a href="https://www.kaggle.com/c/titanic/overview">kaggle</a> for more detailed information about this competition of predicting survival of Titanic passengers.</p>
<div class="sourceCode" id="cb1084"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1084-1"><a href="decision-tree.html#cb1084-1"></a><span class="co"># load the training and test dataset</span></span>
<span id="cb1084-2"><a href="decision-tree.html#cb1084-2"></a>train &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&#39;data/titanic/train.csv&#39;</span>)</span>
<span id="cb1084-3"><a href="decision-tree.html#cb1084-3"></a>test &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;data/titanic/test.csv&quot;</span>)</span>
<span id="cb1084-4"><a href="decision-tree.html#cb1084-4"></a>full=<span class="kw">rbind</span>(train, test, <span class="dt">fill=</span><span class="ot">TRUE</span>)</span>
<span id="cb1084-5"><a href="decision-tree.html#cb1084-5"></a></span>
<span id="cb1084-6"><a href="decision-tree.html#cb1084-6"></a><span class="kw">head</span>(full)</span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass
## 1:           1        0      3
## 2:           2        1      1
## 3:           3        1      3
## 4:           4        1      1
## 5:           5        0      3
## 6:           6        0      3
##                                                   Name    Sex Age SibSp Parch
## 1:                             Braund, Mr. Owen Harris   male  22     1     0
## 2: Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0
## 3:                              Heikkinen, Miss. Laina female  26     0     0
## 4:        Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0
## 5:                            Allen, Mr. William Henry   male  35     0     0
## 6:                                    Moran, Mr. James   male  NA     0     0
##              Ticket    Fare Cabin Embarked
## 1:        A/5 21171  7.2500              S
## 2:         PC 17599 71.2833   C85        C
## 3: STON/O2. 3101282  7.9250              S
## 4:           113803 53.1000  C123        S
## 5:           373450  8.0500              S
## 6:           330877  8.4583              Q</code></pre>
<div class="sourceCode" id="cb1086"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1086-1"><a href="decision-tree.html#cb1086-1"></a><span class="co"># clean data</span></span>
<span id="cb1086-2"><a href="decision-tree.html#cb1086-2"></a><span class="kw">table</span>(full<span class="op">$</span>Embarked)</span></code></pre></div>
<pre><code>## 
##       C   Q   S 
##   2 270 123 914</code></pre>
<div class="sourceCode" id="cb1088"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1088-1"><a href="decision-tree.html#cb1088-1"></a>full[Embarked<span class="op">==</span><span class="st">&quot;&quot;</span>, Embarked<span class="op">:</span><span class="er">=</span><span class="st">&quot;S&quot;</span>]   <span class="co"># replace missing Embarked with the most frequent value</span></span>
<span id="cb1088-2"><a href="decision-tree.html#cb1088-2"></a></span>
<span id="cb1088-3"><a href="decision-tree.html#cb1088-3"></a></span>
<span id="cb1088-4"><a href="decision-tree.html#cb1088-4"></a><span class="co">## examine the cabin information</span></span>
<span id="cb1088-5"><a href="decision-tree.html#cb1088-5"></a><span class="kw">table</span>(full<span class="op">$</span>Cabin)</span></code></pre></div>
<pre><code>## 
##                             A10             A11             A14             A16 
##            1014               1               1               1               1 
##             A18             A19             A20             A21             A23 
##               1               1               1               1               1 
##             A24             A26             A29             A31             A32 
##               1               1               1               1               1 
##             A34             A36              A5              A6              A7 
##               3               1               1               1               1 
##              A9             B10            B101            B102             B11 
##               1               1               1               1               1 
##             B18             B19             B20             B22             B24 
##               2               1               2               2               1 
##             B26             B28              B3             B30             B35 
##               1               2               1               1               2 
##             B36             B37             B38             B39              B4 
##               1               1               1               1               1 
##             B41             B42             B45             B49              B5 
##               2               1               2               2               2 
##             B50     B51 B53 B55     B52 B54 B56 B57 B59 B63 B66         B58 B60 
##               1               3               1               5               3 
##             B61             B69             B71             B73             B77 
##               1               2               2               1               2 
##             B78             B79             B80         B82 B84             B86 
##               2               1               1               1               1 
##             B94         B96 B98            C101            C103            C104 
##               1               4               3               1               1 
##            C105            C106            C110            C111            C116 
##               1               2               1               1               2 
##            C118            C123            C124            C125            C126 
##               1               2               2               2               2 
##            C128            C130            C132            C148              C2 
##               1               1               1               1               2 
##         C22 C26     C23 C25 C27             C28             C30             C31 
##               4               6               1               1               2 
##             C32             C39             C45             C46             C47 
##               2               1               1               2               1 
##             C49             C50             C51             C52             C53 
##               1               1               1               2               1 
##             C54         C55 C57              C6         C62 C64             C65 
##               2               2               2               2               2 
##             C68              C7             C70             C78             C80 
##               2               2               1               4               2 
##             C82             C83             C85             C86             C87 
##               1               2               2               2               1 
##             C89             C90             C91             C92             C93 
##               2               1               1               2               2 
##             C95             C97             C99               D         D10 D12 
##               1               1               1               4               2 
##             D11             D15             D17             D19             D20 
##               1               2               2               2               2 
##             D21             D22             D26             D28             D30 
##               2               1               2               2               2 
##             D33             D34             D35             D36             D37 
##               2               1               2               2               2 
##             D38             D40             D43             D45             D46 
##               1               1               1               1               1 
##             D47             D48             D49             D50             D56 
##               1               1               1               1               1 
##              D6              D7              D9             E10            E101 
##               1               1               1               1               3 
##             E12            E121             E17             E24             E25 
##               1               2               1               2               2 
##             E31             E33             E34             E36             E38 
##               2               2               3               1               1 
##         E39 E41             E40             E44             E45             E46 
##               1               1               2               1               2 
##             E49             E50             E52             E58             E60 
##               1               2               1               1               1 
##             E63             E67             E68             E77              E8 
##               1               2               1               1               2 
##               F           F E46           F E57           F E69           F G63 
##               1               1               1               1               2 
##           F G73              F2             F33             F38              F4 
##               2               4               4               1               4 
##              G6               T 
##               5               1</code></pre>
<div class="sourceCode" id="cb1090"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1090-1"><a href="decision-tree.html#cb1090-1"></a>full[Cabin<span class="op">==</span><span class="st">&quot;&quot;</span>,Cabin<span class="op">:</span><span class="er">=</span><span class="st">&quot;N&quot;</span>]  <span class="co"># if Cabin is missing, replace with N</span></span>
<span id="cb1090-2"><a href="decision-tree.html#cb1090-2"></a>full[,Cabin<span class="op">:</span><span class="er">=</span><span class="kw">str_extract</span>(Cabin,<span class="st">&quot;[:alpha:]&quot;</span>)]   <span class="co"># extract the first letter of Cabin number</span></span>
<span id="cb1090-3"><a href="decision-tree.html#cb1090-3"></a>full[Cabin<span class="op">%in%</span><span class="kw">c</span>(<span class="st">&quot;G&quot;</span>,<span class="st">&quot;T&quot;</span>),Cabin<span class="op">:</span><span class="er">=</span><span class="st">&quot;N&quot;</span>]           <span class="co"># Cabin G and T do not have enough observation and reset to &quot;N&quot;</span></span>
<span id="cb1090-4"><a href="decision-tree.html#cb1090-4"></a><span class="kw">table</span>(full<span class="op">$</span>Cabin)</span></code></pre></div>
<pre><code>## 
##    A    B    C    D    E    F    N 
##   22   65   94   46   41   21 1020</code></pre>
<div class="sourceCode" id="cb1092"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1092-1"><a href="decision-tree.html#cb1092-1"></a><span class="co"># check the missing value pattern</span></span>
<span id="cb1092-2"><a href="decision-tree.html#cb1092-2"></a><span class="kw">summary</span>(full)</span></code></pre></div>
<pre><code>##   PassengerId      Survived          Pclass          Name          
##  Min.   :   1   Min.   :0.0000   Min.   :1.000   Length:1309       
##  1st Qu.: 328   1st Qu.:0.0000   1st Qu.:2.000   Class :character  
##  Median : 655   Median :0.0000   Median :3.000   Mode  :character  
##  Mean   : 655   Mean   :0.3838   Mean   :2.295                     
##  3rd Qu.: 982   3rd Qu.:1.0000   3rd Qu.:3.000                     
##  Max.   :1309   Max.   :1.0000   Max.   :3.000                     
##                 NA&#39;s   :418                                        
##      Sex                 Age            SibSp            Parch      
##  Length:1309        Min.   : 0.17   Min.   :0.0000   Min.   :0.000  
##  Class :character   1st Qu.:21.00   1st Qu.:0.0000   1st Qu.:0.000  
##  Mode  :character   Median :28.00   Median :0.0000   Median :0.000  
##                     Mean   :29.88   Mean   :0.4989   Mean   :0.385  
##                     3rd Qu.:39.00   3rd Qu.:1.0000   3rd Qu.:0.000  
##                     Max.   :80.00   Max.   :8.0000   Max.   :9.000  
##                     NA&#39;s   :263                                     
##     Ticket               Fare            Cabin             Embarked        
##  Length:1309        Min.   :  0.000   Length:1309        Length:1309       
##  Class :character   1st Qu.:  7.896   Class :character   Class :character  
##  Mode  :character   Median : 14.454   Mode  :character   Mode  :character  
##                     Mean   : 33.295                                        
##                     3rd Qu.: 31.275                                        
##                     Max.   :512.329                                        
##                     NA&#39;s   :1</code></pre>
<div class="sourceCode" id="cb1094"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1094-1"><a href="decision-tree.html#cb1094-1"></a><span class="co"># We have a lot of missing data in the Age feature (263/1309)</span></span>
<span id="cb1094-2"><a href="decision-tree.html#cb1094-2"></a><span class="co"># examine rows with missing age</span></span>
<span id="cb1094-3"><a href="decision-tree.html#cb1094-3"></a>full[<span class="kw">is.na</span>(Age)] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass                            Name    Sex Age SibSp
## 1:           6        0      3                Moran, Mr. James   male  NA     0
## 2:          18        1      2    Williams, Mr. Charles Eugene   male  NA     0
## 3:          20        1      3         Masselmani, Mrs. Fatima female  NA     0
## 4:          27        0      3         Emir, Mr. Farred Chehab   male  NA     0
## 5:          29        1      3 O&#39;Dwyer, Miss. Ellen &quot;&quot;Nellie&quot;&quot; female  NA     0
## 6:          30        0      3             Todoroff, Mr. Lalio   male  NA     0
##    Parch Ticket    Fare Cabin Embarked
## 1:     0 330877  8.4583     N        Q
## 2:     0 244373 13.0000     N        S
## 3:     0   2649  7.2250     N        C
## 4:     0   2631  7.2250     N        C
## 5:     0 330959  7.8792     N        Q
## 6:     0 349216  7.8958     N        S</code></pre>
<div class="sourceCode" id="cb1096"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1096-1"><a href="decision-tree.html#cb1096-1"></a>full=full[, Age2<span class="op">:</span><span class="er">=</span><span class="kw">mean</span>(Age,<span class="dt">na.rm=</span><span class="ot">TRUE</span>)][<span class="kw">is.na</span>(Age), Age<span class="op">:</span><span class="er">=</span>Age2][,<span class="op">-</span><span class="kw">c</span>(<span class="st">&quot;Age2&quot;</span>)]  <span class="co"># replace missing age with average</span></span>
<span id="cb1096-2"><a href="decision-tree.html#cb1096-2"></a></span>
<span id="cb1096-3"><a href="decision-tree.html#cb1096-3"></a><span class="co"># replace missing fare with average fare</span></span>
<span id="cb1096-4"><a href="decision-tree.html#cb1096-4"></a>full[<span class="kw">is.na</span>(Fare)]</span></code></pre></div>
<pre><code>##    PassengerId Survived Pclass               Name  Sex  Age SibSp Parch Ticket
## 1:        1044       NA      3 Storey, Mr. Thomas male 60.5     0     0   3701
##    Fare Cabin Embarked
## 1:   NA     N        S</code></pre>
<div class="sourceCode" id="cb1098"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1098-1"><a href="decision-tree.html#cb1098-1"></a>full=full[, Fare2<span class="op">:</span><span class="er">=</span><span class="kw">mean</span>(Fare,<span class="dt">na.rm=</span><span class="ot">TRUE</span>)][<span class="kw">is.na</span>(Fare), Fare<span class="op">:</span><span class="er">=</span>Fare2][,<span class="op">-</span><span class="kw">c</span>(<span class="st">&quot;Fare2&quot;</span>)]</span>
<span id="cb1098-2"><a href="decision-tree.html#cb1098-2"></a></span>
<span id="cb1098-3"><a href="decision-tree.html#cb1098-3"></a><span class="co"># The title of the passenger can affect his survive:</span></span>
<span id="cb1098-4"><a href="decision-tree.html#cb1098-4"></a><span class="co"># extract title </span></span>
<span id="cb1098-5"><a href="decision-tree.html#cb1098-5"></a>full[,Title <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">gsub</span>(<span class="st">&#39;(.*, )|(</span><span class="ch">\\</span><span class="st">..*)&#39;</span>, <span class="st">&#39;&#39;</span>, Name)]</span>
<span id="cb1098-6"><a href="decision-tree.html#cb1098-6"></a>full[Title <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Mlle&#39;</span>,<span class="st">&#39;Ms&#39;</span>,<span class="st">&#39;Mme&#39;</span>,<span class="st">&#39;Lady&#39;</span>,<span class="st">&#39;Dona&#39;</span>), Title<span class="op">:</span><span class="er">=</span><span class="st"> &#39;Miss&#39;</span>] </span>
<span id="cb1098-7"><a href="decision-tree.html#cb1098-7"></a>full[Title <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Capt&#39;</span>,<span class="st">&#39;Col&#39;</span>,<span class="st">&#39;Don&#39;</span>,<span class="st">&#39;Dr&#39;</span>,<span class="st">&#39;Jonkheer&#39;</span>,<span class="st">&#39;Major&#39;</span>,<span class="st">&#39;Rev&#39;</span>,<span class="st">&#39;Sir&#39;</span>,<span class="st">&#39;the Countess&#39;</span>), Title<span class="op">:</span><span class="er">=</span><span class="st"> &#39;Officer&#39;</span>]</span>
<span id="cb1098-8"><a href="decision-tree.html#cb1098-8"></a></span>
<span id="cb1098-9"><a href="decision-tree.html#cb1098-9"></a></span>
<span id="cb1098-10"><a href="decision-tree.html#cb1098-10"></a><span class="co"># Let&#39;s see how many unique levels for each variables</span></span>
<span id="cb1098-11"><a href="decision-tree.html#cb1098-11"></a><span class="kw">apply</span>(full,<span class="dv">2</span>, <span class="cf">function</span>(x) <span class="kw">length</span>(<span class="kw">unique</span>(x)))</span></code></pre></div>
<pre><code>## PassengerId    Survived      Pclass        Name         Sex         Age 
##        1309           3           3        1307           2          99 
##       SibSp       Parch      Ticket        Fare       Cabin    Embarked 
##           7           8         929         282           7           3 
##       Title 
##           5</code></pre>
<div class="sourceCode" id="cb1100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1100-1"><a href="decision-tree.html#cb1100-1"></a><span class="co"># Group Parch and SibSp into categorical variables</span></span>
<span id="cb1100-2"><a href="decision-tree.html#cb1100-2"></a><span class="kw">table</span>(full<span class="op">$</span>Parch)</span></code></pre></div>
<pre><code>## 
##    0    1    2    3    4    5    6    9 
## 1002  170  113    8    6    6    2    2</code></pre>
<div class="sourceCode" id="cb1102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1102-1"><a href="decision-tree.html#cb1102-1"></a><span class="kw">table</span>(full<span class="op">$</span>SibSp)</span></code></pre></div>
<pre><code>## 
##   0   1   2   3   4   5   8 
## 891 319  42  20  22   6   9</code></pre>
<div class="sourceCode" id="cb1104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1104-1"><a href="decision-tree.html#cb1104-1"></a>full[,Parch2<span class="op">:</span><span class="er">=</span><span class="kw">ifelse</span>(Parch<span class="op">&gt;</span><span class="dv">2</span>,<span class="dv">3</span>,Parch), by=.(PassengerId)]</span>
<span id="cb1104-2"><a href="decision-tree.html#cb1104-2"></a>full[,SibSp2<span class="op">:</span><span class="er">=</span><span class="kw">ifelse</span>(SibSp<span class="op">&gt;</span><span class="dv">4</span>,<span class="dv">4</span>,SibSp), by=.(PassengerId)]</span>
<span id="cb1104-3"><a href="decision-tree.html#cb1104-3"></a></span>
<span id="cb1104-4"><a href="decision-tree.html#cb1104-4"></a></span>
<span id="cb1104-5"><a href="decision-tree.html#cb1104-5"></a><span class="co"># Let&#39;s move the features Survived, Pclass, Sex, Embarked to be factors</span></span>
<span id="cb1104-6"><a href="decision-tree.html#cb1104-6"></a>cols&lt;-<span class="kw">c</span>(<span class="st">&quot;Pclass&quot;</span>,<span class="st">&quot;Sex&quot;</span>,<span class="st">&quot;Embarked&quot;</span>,<span class="st">&quot;Title&quot;</span>,<span class="st">&quot;Cabin&quot;</span>,<span class="st">&quot;SibSp2&quot;</span>,<span class="st">&quot;Parch2&quot;</span>)</span>
<span id="cb1104-7"><a href="decision-tree.html#cb1104-7"></a>full[,(cols)<span class="op">:</span><span class="er">=</span><span class="kw">lapply</span>(.SD, as.factor),.SDcols=cols]</span>
<span id="cb1104-8"><a href="decision-tree.html#cb1104-8"></a></span>
<span id="cb1104-9"><a href="decision-tree.html#cb1104-9"></a>full[,Survived<span class="op">:</span><span class="er">=</span><span class="kw">factor</span>(Survived,<span class="dt">levels=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;D&quot;</span>,<span class="st">&quot;S&quot;</span>))]</span>
<span id="cb1104-10"><a href="decision-tree.html#cb1104-10"></a><span class="kw">summary</span>(full)</span></code></pre></div>
<pre><code>##   PassengerId   Survived   Pclass      Name               Sex     
##  Min.   :   1   D   :549   1:323   Length:1309        female:466  
##  1st Qu.: 328   S   :342   2:277   Class :character   male  :843  
##  Median : 655   NA&#39;s:418   3:709   Mode  :character               
##  Mean   : 655                                                     
##  3rd Qu.: 982                                                     
##  Max.   :1309                                                     
##                                                                   
##       Age            SibSp            Parch          Ticket         
##  Min.   : 0.17   Min.   :0.0000   Min.   :0.000   Length:1309       
##  1st Qu.:22.00   1st Qu.:0.0000   1st Qu.:0.000   Class :character  
##  Median :29.88   Median :0.0000   Median :0.000   Mode  :character  
##  Mean   :29.88   Mean   :0.4989   Mean   :0.385                     
##  3rd Qu.:35.00   3rd Qu.:1.0000   3rd Qu.:0.000                     
##  Max.   :80.00   Max.   :8.0000   Max.   :9.000                     
##                                                                     
##       Fare         Cabin    Embarked     Title     Parch2   SibSp2 
##  Min.   :  0.000   A:  22   C:270    Master : 61   0:1002   0:891  
##  1st Qu.:  7.896   B:  65   Q:123    Miss   :267   1: 170   1:319  
##  Median : 14.454   C:  94   S:916    Mr     :757   2: 113   2: 42  
##  Mean   : 33.295   D:  46            Mrs    :197   3:  24   3: 20  
##  3rd Qu.: 31.275   E:  41            Officer: 27            4: 37  
##  Max.   :512.329   F:  21                                          
##                    N:1020</code></pre>
<p>Once we have cleaned our data, we can start to grow decision tree.</p>
<div class="sourceCode" id="cb1106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1106-1"><a href="decision-tree.html#cb1106-1"></a><span class="co"># grow tree</span></span>
<span id="cb1106-2"><a href="decision-tree.html#cb1106-2"></a>fit &lt;-<span class="st"> </span><span class="kw">rpart</span>(Survived <span class="op">~</span><span class="st"> </span>Pclass<span class="op">+</span>Sex<span class="op">+</span>Age<span class="op">+</span>Fare<span class="op">+</span>Cabin<span class="op">+</span>Title,</span>
<span id="cb1106-3"><a href="decision-tree.html#cb1106-3"></a>   <span class="dt">method=</span><span class="st">&quot;class&quot;</span>, <span class="dt">data=</span>full)</span>
<span id="cb1106-4"><a href="decision-tree.html#cb1106-4"></a></span>
<span id="cb1106-5"><a href="decision-tree.html#cb1106-5"></a><span class="kw">printcp</span>(fit) <span class="co"># display the results</span></span></code></pre></div>
<pre><code>## 
## Classification tree:
## rpart(formula = Survived ~ Pclass + Sex + Age + Fare + Cabin + 
##     Title, data = full, method = &quot;class&quot;)
## 
## Variables actually used in tree construction:
## [1] Age    Fare   Pclass Title 
## 
## Root node error: 342/891 = 0.38384
## 
## n=891 (418 observations deleted due to missingness)
## 
##         CP nsplit rel error  xerror     xstd
## 1 0.456140      0   1.00000 1.00000 0.042446
## 2 0.052632      1   0.54386 0.54386 0.035472
## 3 0.014620      3   0.43860 0.43860 0.032658
## 4 0.010000      4   0.42398 0.45906 0.033253</code></pre>
<div class="sourceCode" id="cb1108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1108-1"><a href="decision-tree.html#cb1108-1"></a><span class="kw">plotcp</span>(fit) <span class="co"># visualize cross-validation results</span></span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-505-1.png" width="672" /></p>
<div class="sourceCode" id="cb1109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1109-1"><a href="decision-tree.html#cb1109-1"></a><span class="kw">summary</span>(fit) <span class="co"># detailed summary of splits</span></span></code></pre></div>
<pre><code>## Call:
## rpart(formula = Survived ~ Pclass + Sex + Age + Fare + Cabin + 
##     Title, data = full, method = &quot;class&quot;)
##   n=891 (418 observations deleted due to missingness)
## 
##           CP nsplit rel error    xerror       xstd
## 1 0.45614035      0 1.0000000 1.0000000 0.04244576
## 2 0.05263158      1 0.5438596 0.5438596 0.03547203
## 3 0.01461988      3 0.4385965 0.4385965 0.03265801
## 4 0.01000000      4 0.4239766 0.4590643 0.03325316
## 
## Variable importance
##  Title    Sex   Fare    Age Pclass  Cabin 
##     34     29     12     10      9      5 
## 
## Node number 1: 891 observations,    complexity param=0.4561404
##   predicted class=D  expected loss=0.3838384  P(node) =1
##     class counts:   549   342
##    probabilities: 0.616 0.384 
##   left son=2 (539 obs) right son=3 (352 obs)
##   Primary splits:
##       Title  splits as  RRLRL,        improve=132.75740, (0 missing)
##       Sex    splits as  RL,           improve=124.42630, (0 missing)
##       Pclass splits as  RRL,          improve= 43.78183, (0 missing)
##       Cabin  splits as  LRRRRRL,      improve= 43.53355, (0 missing)
##       Fare   &lt; 10.48125 to the left,  improve= 37.94194, (0 missing)
##   Surrogate splits:
##       Sex   splits as  RL,           agree=0.953, adj=0.881, (0 split)
##       Age   &lt; 15.5     to the right, agree=0.689, adj=0.213, (0 split)
##       Fare  &lt; 15.1729  to the left,  agree=0.645, adj=0.102, (0 split)
##       Cabin splits as  LRLRLRL,      agree=0.617, adj=0.031, (0 split)
## 
## Node number 2: 539 observations
##   predicted class=D  expected loss=0.1632653  P(node) =0.6049383
##     class counts:   451    88
##    probabilities: 0.837 0.163 
## 
## Node number 3: 352 observations,    complexity param=0.05263158
##   predicted class=S  expected loss=0.2784091  P(node) =0.3950617
##     class counts:    98   254
##    probabilities: 0.278 0.722 
##   left son=6 (172 obs) right son=7 (180 obs)
##   Primary splits:
##       Pclass splits as  RRL,          improve=38.436470, (0 missing)
##       Cabin  splits as  RRRRRRL,      improve=15.333150, (0 missing)
##       Fare   &lt; 48.2     to the left,  improve=11.322120, (0 missing)
##       Age    &lt; 11.5     to the left,  improve= 3.220768, (0 missing)
##       Sex    splits as  RL,           improve= 1.939510, (0 missing)
##   Surrogate splits:
##       Fare  &lt; 25.69795 to the left,  agree=0.767, adj=0.523, (0 split)
##       Cabin splits as  RRRRRRL,      agree=0.750, adj=0.488, (0 split)
##       Age   &lt; 29.94057 to the left,  agree=0.659, adj=0.302, (0 split)
##       Title splits as  LL-R-,        agree=0.605, adj=0.192, (0 split)
##       Sex   splits as  RL,           agree=0.557, adj=0.093, (0 split)
## 
## Node number 6: 172 observations,    complexity param=0.05263158
##   predicted class=D  expected loss=0.4825581  P(node) =0.1930415
##     class counts:    89    83
##    probabilities: 0.517 0.483 
##   left son=12 (44 obs) right son=13 (128 obs)
##   Primary splits:
##       Fare  &lt; 23.35    to the right, improve=18.138250, (0 missing)
##       Age   &lt; 38.5     to the right, improve= 4.112016, (0 missing)
##       Sex   splits as  RL,           improve= 0.538206, (0 missing)
##       Title splits as  LR-R-,        improve= 0.538206, (0 missing)
##   Surrogate splits:
##       Sex   splits as  RL,           agree=0.779, adj=0.136, (0 split)
##       Title splits as  LR-R-,        agree=0.779, adj=0.136, (0 split)
##       Age   &lt; 11.5     to the left,  agree=0.756, adj=0.045, (0 split)
## 
## Node number 7: 180 observations
##   predicted class=S  expected loss=0.05  P(node) =0.2020202
##     class counts:     9   171
##    probabilities: 0.050 0.950 
## 
## Node number 12: 44 observations
##   predicted class=D  expected loss=0.09090909  P(node) =0.04938272
##     class counts:    40     4
##    probabilities: 0.909 0.091 
## 
## Node number 13: 128 observations,    complexity param=0.01461988
##   predicted class=S  expected loss=0.3828125  P(node) =0.1436588
##     class counts:    49    79
##    probabilities: 0.383 0.617 
##   left son=26 (7 obs) right son=27 (121 obs)
##   Primary splits:
##       Age   &lt; 36.5     to the right, improve=3.332073, (0 missing)
##       Sex   splits as  LR,           improve=2.050809, (0 missing)
##       Title splits as  RL-L-,        improve=2.050809, (0 missing)
##       Fare  &lt; 7.8875   to the right, improve=1.178727, (0 missing)
## 
## Node number 26: 7 observations
##   predicted class=D  expected loss=0.1428571  P(node) =0.007856341
##     class counts:     6     1
##    probabilities: 0.857 0.143 
## 
## Node number 27: 121 observations
##   predicted class=S  expected loss=0.3553719  P(node) =0.1358025
##     class counts:    43    78
##    probabilities: 0.355 0.645</code></pre>
<div class="sourceCode" id="cb1111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1111-1"><a href="decision-tree.html#cb1111-1"></a><span class="co"># plot tree</span></span>
<span id="cb1111-2"><a href="decision-tree.html#cb1111-2"></a><span class="kw">fancyRpartPlot</span>(fit)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-506-1.png" width="672" /></p>
<p>Each node displays the proportion of death and survival, as well as the precent of the total samples. For example, in the root node (the node on the top), about 38% of passengers will survive and 62% of passengers will die. The decision split the root node based on the title of passenger. If a passenger has title start with “Mr” or “Officer”, then they will be split to node 2. At node 2, the survival rate is only 16%, while at node 3, the survival rate is 72%. This makes sense because in the movie we see most crew sacrifice their lives to save others.</p>
<p>At node 3, we really start to see how social status affect passenger’s survival probability. Being a upper class significantly improve your survival probability. The survival probability for passenger of class 1 or 2 has survival probability of 95%, while for average passenger the survival probability is only 48%. This is the power of data speaking!</p>
<div class="sourceCode" id="cb1112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1112-1"><a href="decision-tree.html#cb1112-1"></a><span class="co"># confirm the survival rate</span></span>
<span id="cb1112-2"><a href="decision-tree.html#cb1112-2"></a>full[Title<span class="op">%in%</span><span class="kw">c</span>(<span class="st">&quot;Mr&quot;</span>,<span class="st">&quot;Officer&quot;</span>)]<span class="op">$</span>Survived<span class="op">%&gt;%</span><span class="kw">table</span>()</span></code></pre></div>
<pre><code>## .
##   D   S 
## 451  88</code></pre>
<div class="sourceCode" id="cb1114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1114-1"><a href="decision-tree.html#cb1114-1"></a>full[<span class="op">!</span>Title<span class="op">%in%</span><span class="kw">c</span>(<span class="st">&quot;Mr&quot;</span>,<span class="st">&quot;Officer&quot;</span>)]<span class="op">$</span>Survived<span class="op">%&gt;%</span><span class="kw">table</span>()</span></code></pre></div>
<pre><code>## .
##   D   S 
##  98 254</code></pre>
<div class="sourceCode" id="cb1116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1116-1"><a href="decision-tree.html#cb1116-1"></a><span class="co"># confirm the survival rate for social class</span></span>
<span id="cb1116-2"><a href="decision-tree.html#cb1116-2"></a>full[<span class="op">!</span>Title<span class="op">%in%</span><span class="kw">c</span>(<span class="st">&quot;Mr&quot;</span>,<span class="st">&quot;Officer&quot;</span>) <span class="op">&amp;</span><span class="st"> </span>Pclass <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>) ]<span class="op">$</span>Survived<span class="op">%&gt;%</span><span class="kw">table</span>()</span></code></pre></div>
<pre><code>## .
##   D   S 
##   9 171</code></pre>
<p>Let’s take Boston house as an example.</p>
<div class="sourceCode" id="cb1118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1118-1"><a href="decision-tree.html#cb1118-1"></a>Boston=<span class="kw">fread</span>(<span class="st">&quot;data/Boston.csv&quot;</span>)</span>
<span id="cb1118-2"><a href="decision-tree.html#cb1118-2"></a>Boston[,location<span class="op">:</span><span class="er">=</span><span class="kw">factor</span>(location)]</span>
<span id="cb1118-3"><a href="decision-tree.html#cb1118-3"></a>Boston[,chas<span class="op">:</span><span class="er">=</span><span class="kw">factor</span>(chas)]</span>
<span id="cb1118-4"><a href="decision-tree.html#cb1118-4"></a></span>
<span id="cb1118-5"><a href="decision-tree.html#cb1118-5"></a></span>
<span id="cb1118-6"><a href="decision-tree.html#cb1118-6"></a><span class="co"># grow tree</span></span>
<span id="cb1118-7"><a href="decision-tree.html#cb1118-7"></a>fit &lt;-<span class="st"> </span><span class="kw">rpart</span>(medv <span class="op">~</span><span class="st"> </span>lstat<span class="op">+</span>chas<span class="op">+</span>rm,</span>
<span id="cb1118-8"><a href="decision-tree.html#cb1118-8"></a>   <span class="dt">method=</span><span class="st">&quot;anova&quot;</span>, <span class="dt">data=</span>Boston)</span>
<span id="cb1118-9"><a href="decision-tree.html#cb1118-9"></a></span>
<span id="cb1118-10"><a href="decision-tree.html#cb1118-10"></a><span class="kw">printcp</span>(fit) <span class="co"># display the results</span></span></code></pre></div>
<pre><code>## 
## Regression tree:
## rpart(formula = medv ~ lstat + chas + rm, data = Boston, method = &quot;anova&quot;)
## 
## Variables actually used in tree construction:
## [1] lstat rm   
## 
## Root node error: 42716/506 = 84.42
## 
## n= 506 
## 
##         CP nsplit rel error  xerror     xstd
## 1 0.452744      0   1.00000 1.00421 0.083135
## 2 0.171172      1   0.54726 0.64623 0.060973
## 3 0.071658      2   0.37608 0.42455 0.047450
## 4 0.034288      3   0.30443 0.35162 0.045405
## 5 0.021294      4   0.27014 0.31865 0.043072
## 6 0.018024      5   0.24884 0.31028 0.043186
## 7 0.015851      6   0.23082 0.29637 0.041413
## 8 0.010000      7   0.21497 0.29096 0.040537</code></pre>
<div class="sourceCode" id="cb1120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1120-1"><a href="decision-tree.html#cb1120-1"></a><span class="kw">plotcp</span>(fit) <span class="co"># visualize cross-validation results</span></span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-508-1.png" width="672" /></p>
<div class="sourceCode" id="cb1121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1121-1"><a href="decision-tree.html#cb1121-1"></a><span class="kw">summary</span>(fit) <span class="co"># detailed summary of splits</span></span></code></pre></div>
<pre><code>## Call:
## rpart(formula = medv ~ lstat + chas + rm, data = Boston, method = &quot;anova&quot;)
##   n= 506 
## 
##           CP nsplit rel error    xerror       xstd
## 1 0.45274420      0 1.0000000 1.0042141 0.08313508
## 2 0.17117244      1 0.5472558 0.6462307 0.06097273
## 3 0.07165784      2 0.3760834 0.4245511 0.04745025
## 4 0.03428819      3 0.3044255 0.3516220 0.04540510
## 5 0.02129389      4 0.2701373 0.3186509 0.04307227
## 6 0.01802372      5 0.2488434 0.3102767 0.04318598
## 7 0.01585116      6 0.2308197 0.2963670 0.04141270
## 8 0.01000000      7 0.2149686 0.2909642 0.04053677
## 
## Variable importance
##    rm lstat  chas 
##    58    42     1 
## 
## Node number 1: 506 observations,    complexity param=0.4527442
##   mean=22.53281, MSE=84.41956 
##   left son=2 (430 obs) right son=3 (76 obs)
##   Primary splits:
##       rm    &lt; 6.941  to the left,  improve=0.45274420, (0 missing)
##       lstat &lt; 9.725  to the right, improve=0.44236500, (0 missing)
##       chas  splits as  LR,         improve=0.03071613, (0 missing)
##   Surrogate splits:
##       lstat &lt; 4.83   to the right, agree=0.891, adj=0.276, (0 split)
## 
## Node number 2: 430 observations,    complexity param=0.1711724
##   mean=19.93372, MSE=40.27284 
##   left son=4 (175 obs) right son=5 (255 obs)
##   Primary splits:
##       lstat &lt; 14.4   to the right, improve=0.42222770, (0 missing)
##       rm    &lt; 6.5455 to the left,  improve=0.14428770, (0 missing)
##       chas  splits as  LR,         improve=0.03078799, (0 missing)
##   Surrogate splits:
##       rm &lt; 5.858  to the left,  agree=0.688, adj=0.234, (0 split)
## 
## Node number 3: 76 observations,    complexity param=0.07165784
##   mean=37.23816, MSE=79.7292 
##   left son=6 (46 obs) right son=7 (30 obs)
##   Primary splits:
##       rm    &lt; 7.437  to the left,  improve=0.50515690, (0 missing)
##       lstat &lt; 4.68   to the right, improve=0.33189140, (0 missing)
##       chas  splits as  LR,         improve=0.01614064, (0 missing)
##   Surrogate splits:
##       lstat &lt; 3.99   to the right, agree=0.776, adj=0.433, (0 split)
##       chas  splits as  LR,         agree=0.645, adj=0.100, (0 split)
## 
## Node number 4: 175 observations,    complexity param=0.02129389
##   mean=14.956, MSE=19.27572 
##   left son=8 (76 obs) right son=9 (99 obs)
##   Primary splits:
##       lstat &lt; 19.83  to the right, improve=0.26964970, (0 missing)
##       rm    &lt; 5.567  to the left,  improve=0.07509700, (0 missing)
##       chas  splits as  LR,         improve=0.07207135, (0 missing)
##   Surrogate splits:
##       rm &lt; 5.5505 to the left,  agree=0.726, adj=0.368, (0 split)
## 
## Node number 5: 255 observations,    complexity param=0.03428819
##   mean=23.3498, MSE=26.0087 
##   left son=10 (235 obs) right son=11 (20 obs)
##   Primary splits:
##       lstat &lt; 4.91   to the right, improve=0.22084090, (0 missing)
##       rm    &lt; 6.543  to the left,  improve=0.21720990, (0 missing)
##       chas  splits as  LR,         improve=0.06223827, (0 missing)
## 
## Node number 6: 46 observations,    complexity param=0.01585116
##   mean=32.11304, MSE=41.29592 
##   left son=12 (7 obs) right son=13 (39 obs)
##   Primary splits:
##       lstat &lt; 9.65   to the right, improve=0.35644260, (0 missing)
##       rm    &lt; 7.3    to the right, improve=0.05938584, (0 missing)
## 
## Node number 7: 30 observations
##   mean=45.09667, MSE=36.62832 
## 
## Node number 8: 76 observations
##   mean=12.35395, MSE=16.03617 
## 
## Node number 9: 99 observations
##   mean=16.95354, MSE=12.57481 
## 
## Node number 10: 235 observations,    complexity param=0.01802372
##   mean=22.65064, MSE=17.97365 
##   left son=20 (113 obs) right son=21 (122 obs)
##   Primary splits:
##       lstat &lt; 9.715  to the right, improve=0.18227780, (0 missing)
##       rm    &lt; 6.543  to the left,  improve=0.14702280, (0 missing)
##       chas  splits as  LR,         improve=0.02949653, (0 missing)
##   Surrogate splits:
##       rm   &lt; 6.0285 to the left,  agree=0.706, adj=0.389, (0 split)
##       chas splits as  RL,         agree=0.532, adj=0.027, (0 split)
## 
## Node number 11: 20 observations
##   mean=31.565, MSE=47.18727 
## 
## Node number 12: 7 observations
##   mean=23.05714, MSE=61.85673 
## 
## Node number 13: 39 observations
##   mean=33.73846, MSE=20.24391 
## 
## Node number 20: 113 observations
##   mean=20.76991, MSE=6.503342 
## 
## Node number 21: 122 observations
##   mean=24.39262, MSE=22.28708</code></pre>
<div class="sourceCode" id="cb1123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1123-1"><a href="decision-tree.html#cb1123-1"></a><span class="co"># plot tree</span></span>
<span id="cb1123-2"><a href="decision-tree.html#cb1123-2"></a><span class="kw">fancyRpartPlot</span>(fit)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-508-2.png" width="672" /></p>
<p>Similarly, let’s examine the decision tree for Boston house price. At the top note, we have 506 houses and the average price is 23. Thus without additional information, our prediction of hourse price will be 23. Next, we split the house based on rm&lt;6.9. For house with rm&lt;6.9 (average number of rooms per dwelling&lt;6.9), their average price will be 20, and for house with rm&gt;=6.9, their average house price is 37. This makes a lot of sense since the size of a house is the most important factor in determining its value.</p>
<p>We can verify the value of these house as follow:</p>
<div class="sourceCode" id="cb1124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1124-1"><a href="decision-tree.html#cb1124-1"></a>Boston<span class="op">$</span>medv<span class="op">%&gt;%</span><span class="kw">mean</span>()</span></code></pre></div>
<pre><code>## [1] 22.53281</code></pre>
<div class="sourceCode" id="cb1126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1126-1"><a href="decision-tree.html#cb1126-1"></a>Boston[rm<span class="op">&gt;=</span><span class="fl">6.9</span>]<span class="op">$</span>medv<span class="op">%&gt;%</span><span class="kw">mean</span>()</span></code></pre></div>
<pre><code>## [1] 37.1</code></pre>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="best-subset-model-selection-with-trainingtest-set.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="maching-learning-with-caret.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/xuliang-leon/scma450/edit/master/23-decisiontree.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
